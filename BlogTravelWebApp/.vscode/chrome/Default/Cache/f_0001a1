/* aep-formats-20.0.2 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./handlebars/base"),e=a("./handlebars/safe-string")["default"],f=a("./handlebars/exception")["default"],g=a("./handlebars/utils"),h=a("./handlebars/runtime"),i=function(){var a=new d.HandlebarsEnvironment;return g.extend(a,d),a.SafeString=e,a.Exception=f,a.Utils=g,a.VM=h,a.template=function(b){return h.template(b,a)},a},j=i();j.create=i,c["default"]=j},{"./handlebars/base":2,"./handlebars/exception":3,"./handlebars/runtime":4,"./handlebars/safe-string":5,"./handlebars/utils":6}],2:[function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function f(a,b){p.log(a,b)}var g=a("./utils"),h=a("./exception")["default"],i="1.3.0";c.VERSION=i;var j=4;c.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};c.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";c.HandlebarsEnvironment=d,d.prototype={constructor:d,logger:p,log:f,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};c.logger=p,c.log=f;var q=function(a){var b={};return g.extend(b,a),b};c.createFrame=q},{"./exception":3,"./utils":6}],3:[function(a,b,c){"use strict";function d(a,b){var c;b&&b.firstLine&&(c=b.firstLine,a+=" - "+c+":"+b.firstColumn);for(var d=Error.prototype.constructor.call(this,a),f=0;f<e.length;f++)this[e[f]]=d[e[f]];c&&(this.lineNumber=c,this.column=b.firstColumn)}var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d},{}],4:[function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=l;if(b!==c){if(c>b){var d=m[c],e=m[b];throw new k("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new k("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new k("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new k("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:j.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},j.extend(c,b),j.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new k("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j=a("./utils"),k=a("./exception")["default"],l=a("./base").COMPILER_REVISION,m=a("./base").REVISION_CHANGES;c.checkRevision=d,c.template=e,c.programWithDepth=f,c.program=g,c.invokePartial=h,c.noop=i},{"./base":2,"./exception":3,"./utils":6}],5:[function(a,b,c){"use strict";function d(a){this.string=a}d.prototype.toString=function(){return""+this.string},c["default"]=d},{}],6:[function(a,b,c){"use strict";function d(a){return i[a]||"&amp;"}function e(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function f(a){return a instanceof h?a.toString():a||0===a?(a=""+a,k.test(a)?a.replace(j,d):a):""}function g(a){return a||0===a?n(a)&&0===a.length?!0:!1:!0}var h=a("./safe-string")["default"],i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=/[&<>"'`]/g,k=/[&<>"'`]/;c.extend=e;var l=Object.prototype.toString;c.toString=l;var m=function(a){return"function"==typeof a};m(/x/)&&(m=function(a){return"function"==typeof a&&"[object Function]"===l.call(a)});var m;c.isFunction=m;var n=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===l.call(a):!1};c.isArray=n,c.escapeExpression=f,c.isEmpty=g},{"./safe-string":5}],7:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(e){return p.reject(a,e)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;return a&&"object"==typeof a&&"function"==typeof b?function(){b.apply(a,arguments)}:void 0}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(d){c.status="error",c.value=d}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a("immediate"),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=c=e,e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},c.resolve=k,c.reject=l,c.all=m,c.race=n},{immediate:7}],9:[function(a,b,c){var d=a("./utils"),e=a("./request"),f=a("./viewable.js"),g=a("./user-metrics"),h=a("./timer.js"),i=a("./context.js"),j=a("./reporter.js"),k=a("./signal"),l=a("./target"),m=a("./supported-media-type"),n=a("./inline"),o=a("./lo"),p={"e-commerce":a("./ecommerce-data"),"e-commerce-group":a("./ecommerce-group-data"),"native-buyer":a("./buyer-tag-native-data"),"third-party-buyer":a("./third-party-buyer-data"),video:a("./video-data"),display:a("./display-data"),passback:a("./passback-data")},q=function(a,b){var c,k=d.isPageVisible(),q=k?i.getId(a.tagWindow.admTopWindow):null;a.viewableImp&&(c=new g({name:a.id,hadInitiatedVisible:k,expirationDays:15,vRateMinRecords:10,vRateMaxRecords:30,vTimeMinRecords:5,vTimeMaxRecords:15}));var r=function(a){return a.tags&&a.tags.length>0?"e-commerce-group":a.ads&&a.ads.length>0?"e-commerce":2==a.mt?"display":3==a.mt?"video":a.byr?1==a.typ?"native-buyer":"third-party-buyer":"passback"},s=function(b){if(a.viewableImp){var e,g=new f(a,a.placement.viewableElement),i=new h(100,12e4);g.onFirstView.then(function(){b.reportViewableImpression(),c.registerViewableImpression(),e=setInterval(function(){c.updateViewabilityTime(i.getElapsedTime())},5e3),d.addEventListener(a.tagWindow.admTopWindow,"unload",function(){b.reportViewableTime(i.getElapsedTime()),c.updateViewabilityTime(i.getElapsedTime()),clearInterval(e),i.stop(),g.stop()})}),g.onViewable.subscribe(function(){i.start()}),g.onHidden.subscribe(function(){i.stop()}),a.waCfg?a.placement.onShow.subscribe(g.start):g.start()}},t=function(b,c,d,e){var f=a.placement;a.removed||("display"==c||"video"==c?f.makeItFloat(b,d):f.insert(b,d,e))},u=function(b){var c=a.placement;a.waCfg?c.getWaNode().then(function(e){try{e=n.getInsertionNode(e);var f=n.getMargin(e,a);n.setFormatMargin(c.formatElement,f),t(e,b,f),c.show(!0,a.aspectRatio)}catch(g){d.log(g)}},function(a){d.log(a)}):a.pSelector?d.wait(function(){return c.formatWindow.document.querySelector(a.pSelector)},70,function(a){d.domContentLoaded(c.formatWindow,a)}).then(function(d){t(d,b,null,!0),c.show(!1,a.aspectRatio)})["catch"](function(){d.log(a.id,a.pSelector,"Placement node from selector cannot be found in the format document. Maybe you should activate isTopFormat"),c.show(!1,a.aspectRatio)}):c.show(!1,a.aspectRatio)},v=function(c,d){var e=null;return p[c]&&("passback"!=c||a.passback)&&(e=new p[c](d,a,b,q)),e},w=function(c,f){var g,h=a.tagWindow==top?a.placement.formatWindow:a.tagWindow;g=e.get(b,h,a.group),g.subscribe.cb(function(b){var e,f=r(b),g=v(f,b);d.log(a.id,"Service response",f,g),a.isTopFormat||d.setIframeDisplay(a.tagWindow,"inline"),g?(a.waCfg&&g.isDeferredImpression&&a.placement.onShow.subscribe(function(){e.reportDeferredImpression(g.deferredImpressionHash)}),d.callIfFunction(a.onServiceResponse,null,[a,g]),"e-commerce-group"==g.mediaType?c(g):(e=new j(a.reporting,a.deferredImpression,g),"native-buyer"==g.mediaType?g.ready.then(function(){c(g),s(e)}):(c(g),s(e)))):c(null),u(f)}),g.subscribe.ccb(f)},x=function(){d.log(a.id,"Service request",o.reduce(o.filter(o.map(b.parameters,function(a,b){return{name:b,value:a}}),function(a){return a.name in{t:1,tc:1,tg:1,q:1,qt:1}}),function(a,b){return a+b.name+": "+b.value+" | "},"| "))};this.require=function(e,f){if(x(),d.extend(b.parameters,{umt:m.getUMT()}),a.viewableImp&&d.extend(b.parameters,{ctx:q,vt:o.isNumber(c.getViewabilityTime())?d.msToSec(c.getViewabilityTime()):null,vr:c.getViewabilityRate()}),a.waCfg&&(b.parameters.di=1),b.targets){var g=new l(b.targets,a.tagWindow,a.id);g.getTargets().then(function(a){var c=o.reduce(a,function(a,b){return b&&"string"==typeof b&&a.push(b),a},[]).join(";");b.parameters.trg=c,w(e,f)})}else w(e,f)}};q.onFormatCancel=new k,b.exports={onFormatCancel:q.onFormatCancel,create:function(a,b){return new q(a,b)}}},{"./buyer-tag-native-data":11,"./context.js":13,"./display-data":19,"./ecommerce-data":25,"./ecommerce-group-data":26,"./inline":35,"./lo":36,"./passback-data":41,"./reporter.js":46,"./request":47,"./signal":52,"./supported-media-type":56,"./target":58,"./third-party-buyer-data":59,"./timer.js":61,"./user-metrics":63,"./utils":64,"./video-data":65,"./viewable.js":66}],10:[function(a,b,c){var d=a("./dom"),e=a("./utils"),f=a("./lo"),g=function(){var a,b,c=this,g=null,h=[],i=0,j=0,k=function(){var b=a.split(":");return b[1]/b[0]};this.getHeight=function(){return b.offsetWidth*k()},this.setReferenceElement=function(a,c){b=a,c&&(i=c.top,j=c.bottom)},this.setRatio=function(b){a=b},this.isEnabled=function(){return a&&!a.match(/^\d+:[1-9]\d*$/)&&e.log("Invalid aspect ratio",a),a&&a.match(/^\d+:[1-9]\d*$/)},this.addElement=function(a){h.push(a)},this.scaleReferenceElement=function(){d(b).css({height:c.getHeight()+i+j+"px"})},this.scaleInnerElements=function(){f.forEach(h,function(a){d(a).css({height:c.getHeight()+"px"})})},this.start=function(){g||(c.scaleReferenceElement(),c.scaleInnerElements(),g=setInterval(function(){c.scaleReferenceElement(),c.scaleInnerElements()},120))},this.stop=function(){clearInterval(g),g=null}};b.exports=g},{"./dom":23,"./lo":36,"./utils":64}],11:[function(a,b,c){var d=a("./external"),e=a("./utils"),f=a("./service-data"),g=a("lie"),h=a("./lo"),i=function(a,b,c,i){f.apply(this,arguments);var j=this,k=b.fs+"files/byr/"+a.byr+".js",l=function(a){return a.image=e.secureImage(a.image,b.imageProxy),a.advLogo=e.secureImage(a.advLogo,b.imageProxy),a.imageOrThumbnail=e.secureImage(a.imageOrThumbnail,b.imageProxy),a.thumbnail=e.secureImage(a.thumbnail,b.imageProxy),a},m=function(){var a=d.get(k,{jsonp:{cbName:"_"+j.buyerId}});return new g(function(b,c){a.then(function(a){a&&a.data&&a.data.ads&&0!=a.data.ads.length?(a.data.ads=h.map(a.data.ads,l),e.extend(j,a.data),b(j)):c()})})};this.isDeferredImpression=!!a.di,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.ads=null,this.buyerId=a.byr,this.ready=m(),this.mediaType="native-buyer",this.config=b,this.vImpEventUrl=j.buildEventUrl("vimp",{byr:j.buyerId}),this.vTimeEventUrl=j.buildEventUrl("vtime",{v:"[time]",byr:j.buyerId})};b.exports=i},{"./external":28,"./lo":36,"./service-data":48,"./utils":64,lie:8}],12:[function(a,b,c){var d=a("./utils"),e=a("./dom");b.exports=function(a){a.config.avoidHrefRestoring||(a.element.href=a.value),e(a.element).on("mousedown",function(b){b=b||window.event,a.config.oob&&(2==b.button||d.isFirefox()&&1==b.button)?d.isJsToHtmlBase64DataUriSupported()?a.element.href=d.jsToHtmlBase64DataUri("var img = new Image(); img.onerror = img.onload = function() { 	window.location.href = '"+a.value+"'; };img.src = 'http://ia.nspmotion.com/redirect/?r=' + Math.random() + '&url=' + 	encodeURIComponent('"+d.noCache(a.config.oob)+"') ;"):a.element.removeAttribute("href"):a.config.avoidHrefRestoring||(a.element.href=a.value),a.config.onClickProduct.dispatch()}),a.element.onclick=function(){var b=a.config.placement.formatWindow.admTopWindow;if(a.value){var c=b.open(d.addProtocolIfNeeded(a.value,d.getProtocol()));if(c)try{c.focus()}catch(e){}var f=function(){c?a.config.redirect&&(b.location.href=a.config.redirect,c.focus()):b.location.href=a.value};d.isAccessible(a.config.tagWindow.parent)&&a.config.tagWindow.parent.HTMLCreative&&a.config.tagWindow.parent.HTMLCreative.reportEvent({Type:"Click"}),a.config.oob?d.report("http://ia.nspmotion.com/redirect/?r=[rnd]&url="+encodeURIComponent(d.noCache(a.config.oob)),f):f()}return!1}}},{"./dom":23,"./utils":64}],13:[function(a,b,c){var d=a("./utils.js"),e=a("./lo"),f={getId:function(a){var b=[],c=d.getViewportSize(a.document);return e.forEach(f.idList,function(a,d){a=a.sort(function(a,b){return b.value-a.value});for(var e=0;e<a.length;e++)if(c[d]>=a[e].value){b.push(a[e].id);break}}),b.join("-")},idList:{width:[{value:0,id:"hs"},{value:1051,id:"hm"},{value:1401,id:"hl"}],height:[{value:0,id:"vs"},{value:601,id:"vm"},{value:851,id:"vl"}]}};b.exports={getId:f.getId}},{"./lo":36,"./utils.js":64}],14:[function(a,b,c){var d=a("./utils.js"),e=function(a){var b=function(a){return"%"+a.charCodeAt(0).toString(16)},c=function(a){return encodeURIComponent(a).replace(/[-_z.]/g,b).replace(/%/g,"z")},e=function(a){return decodeURIComponent(a.replace(/z/g,"%"))};this.setCookie=function(b,d,e){try{var f=b.toUTCString?b.toUTCString().replace(",",""):b+"",g=a+"="+c(f);if(d){var h=d.toUTCString?d.toUTCString():d+"";g+=";expires="+h+";path=/",e&&(g+=";domain="+e)}document.cookie=g}catch(i){}},this.getCookie=function(){try{for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var f=b[c].split("=");if(d.trim(f[0])==a)return e(f[1])}}catch(g){}return""},this.updateCookie=function(b,c){var d=this.getCookie(a+"Date");this.setCookie(b,d,c)},this.deleteCookie=function(b){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; domain="+b:"")+"; path=/"}};b.exports=e},{"./utils.js":64}],15:[function(a,b,c){var d=a("./utils"),e=a("lie"),f=a("./lo");b.exports=function(a,b,c){var g=this,h=a.config,i=b.element.ownerDocument.createElement("div");i.innerHTML=c.fn(a);for(var j=d.toArray(i.children);i.firstChild;)b.element.parentNode.insertBefore(i.firstChild,b.element);b.element.parentNode.removeChild(b.element),d.setIframeDisplay(h.placement.formatWindow,"inline"),h.cssLoadCouldBeDetected&&(f.forEach(j,function(c){g.run(d.extend({element:c,serviceData:a,products:a.ads},b,{overwrite:!1}))}),e.all(g.ready).then(function(a){h.waCfg&&h.placement.formatWindow.aepwa._formatReady.resolve()})["catch"](function(a){d.log(a)}))}},{"./lo":36,"./utils":64,lie:8}],16:[function(a,b,c){var d=a("./utils"),e=a("./geometry"),f=a("lie"),g=a("./messenger"),h=a("./dom"),i={0:"waiting",1:"init",2:"ready",3:"inViewport",4:"outViewport",5:"remove",6:"removed"},j={Waiting:0,Init:1,Ready:2,InViewport:3,OutViewport:4,Remove:5,Removed:6};b.exports=function(a,b,c,k){var l,m,n=d.createWatcher(function(){return e.intersectsViewport(b,50)}),o=function(a,b){var c={message:a,type:"Event",args:b||null};d.log("sendMessage",'"'+i[a]+'"',c),l.send(a,c)},p=function(a){var b=i[a.message];d.log("receiveMessage",'"'+b+'"'),q[b](a.args)},q={waiting:function(a){o(j.Init,k.params)},ready:function(a){n.status&&o(j.InViewport),n.leading.subscribe(function(){o(j.InViewport)}),n.trailing.subscribe(function(){o(j.OutViewport)}),m(b)},remove:function(b){n.unwatch(),a.placement.remove(!!a.waCfg)}};this.ready=new f(function(a,b){m=a}),this.init=function(){b.contentWindow||d.log(b.tagName+" does not support Creative controller. Use an iframe instead"),h(b).css({visibility:"visible"}),l=new g(a.isTopFormat?a.placement.topWindow:a.placement.formatWindow,b.contentWindow,k.file),l.receive(p),a.placement.onBeforeRemove.subscribe(function(){o(j.Removed)}),n.watch()}}},{"./dom":23,"./geometry":31,"./messenger":39,"./utils":64,lie:8}],17:[function(a,b,c){b.exports={desktop:1,tablet:2,smartphone:3}},{}],18:[function(a,b,c){var d=a("./utils"),e=a("./dom"),f=a("./dom-utils"),g={Expandable:a("./expandable"),Slider:a("./slider"),Fader:a("./fader"),Sidetabs:a("./sidetabs"),SidetabsMetro:a("./sidetabs-metro"),Creative:a("./creative"),Pushdown:a("./pushdown")},h={_fontLoad:[],ready:[],aspectRatio:function(a){a.config.placement.aspectRatio.addElement(a.element)},lines:function(a){var b=d.getInternetExplorerVersion(),c=a.element,e=a.config.placement.rootElement;if(b>0&&9>b)f.limitLines(c);else{var g=c.style.display;c.style.display="none";var i=f.fontSpy(c);h._fontLoad.push(i),i.then(function(){c.style.display=g,e.style.display&&"none"!=e.style.display?f.limitLines(c):a.config.placement.onShow.subscribe(function(){f.limitLines(c)})})["catch"](function(){c.style.display=g,"none"==e.style.display?a.config.placement.onShow.subscribe(function(){f.limitLines(c)}):f.limitLines(c)})}},controller:function(a){var b=new g[a.value](a.config,a.element,a.scope,a.serviceData);b.ready&&h.ready.push(b.ready),b.init()},show:function(a){e(a.element.nextSibling).trigger("show"),a.element.parentNode.removeChild(a.element)},service:function(b){a("./service.directive").call(h,b)},src:function(b){h.ready.push(a("./image.directive").call(h,b))},href:function(b){a("./click.directive").call(h,b)},run:function(a){for(var b={},c={},e=a.element.children.length-1;e>=0;e--){var f=a.element.children[e],g=h.run(d.extend({element:f},a,{overwrite:!1}));f.getAttribute("adm-controller")||d.extend(b,g,{array:"concat"})}for(var i=0;a.element.attributes&&i<a.element.attributes.length;i++){var j=a.element.attributes[i];if(j.name.match(/adm\-.*/)){var k=d.toCamelCase(j.name);c[k]=c[k]||[],c[k].push({element:a.element,value:d.parseIfJson(j.value)})}}d.extend(b,c,{array:"concat"});for(var l in c)if(c.hasOwnProperty(l)&&h[l])for(var m=0;m<c[l].length;m++){var n=c[l][m];h[l](d.extend({element:n.element,value:n.value,scope:b},a,{overwrite:!1}))}return b}};b.exports=h},{"./click.directive":12,"./creative":16,"./dom":23,"./dom-utils":22,"./expandable":27,"./fader":29,"./image.directive":34,"./pushdown":44,"./service.directive":49,"./sidetabs":51,"./sidetabs-metro":50,"./slider":53,"./utils":64}],19:[function(a,b,c){var d=a("./utils"),e=a("./lo"),f=a("./service-data"),g=function(a,b,c,g){f.apply(this,arguments);var h=this,i=d.parseIfJson(a.prm)||{},j=b.displayCfg||{},k=function(a){var c=h.buildClickUrl(a);return c&&b.clickAudit&&(c=d.noCache(b.clickAudit)+encodeURIComponent(c)),c},l=function(a,c,f){var g=d.parseQueryParams(d.replaceTokens(a.clk,b,"%","%")),i=e.assign({},c,{title:a.tit,eventURL:h.buildEventUrl(null,{c:g.c}),clickTag:k(g)});return e.assign(i,f||{})};this.file=j.file||a.file,this.params=l(a,i,j.params),this.isDeferredImpression=!!a.di,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.mediaType="display",this.config=b,this.vImpEventUrl=h.buildEventUrl("vimp"),this.vTimeEventUrl=h.buildEventUrl("vtime",{v:"[time]"})};b.exports=g},{"./lo":36,"./service-data":48,"./utils":64}],20:[function(a,b,c){var d=a("./utils"),e=a("./signal"),f=a("./dom-utils"),g=a("./geometry"),h=a("./lo"),i=function(a,b){var c=this,j=a&&a.ownerDocument||b&&b.ownerDocument||b||document;b=b||j;var k={appear:function(a){return c.each(function(b){i.Data.set(b,"appear",d.poll(function(){return g.isInViewport(b)}).subscribe(a))})},visible:function(a){return c.each(function(b){i.Data.set(b,"visible",d.poll(function(){return f.isVisible(b)},a))})},hidden:function(a){return c.each(function(b){i.Data.set(b,"hidden",d.poll(function(){return!f.isVisible(b)},a))})},show:function(a){return c.each(function(b){var c=new e(!1);c.subscribe(a),i.Data.set(b,"show",c)})}};this.trigger=function(a){return c.each(function(b){var c=i.Data.get(b,a);c||(c=new e(!1),i.Data.set(b,a,c)),c.dispatch()})},this.bind=function(a,b){return c.each(function(c){var d=function(){return b.apply(c,arguments)};if(a in k){var e=i.Data.get(c,a);e?e.subscribe(d):k[a](d)}else c.attachEvent?c.attachEvent("on"+a,d):c.addEventListener?c.addEventListener(a,d,!0):c["on"+a]=d})},this.children=function(){var a=[];return h.forEach(n,function(b){a=a.concat(d.toArray(b.children))}),new i(a,b)},this.addClass=function(a){return c.each(function(b){b.className.indexOf(a)<0&&(b.className+=" "+a)})},this.removeClass=function(a){return c.each(function(b){b.className=b.className.replace(a,"")})},this.css=function(a,b,d){return c.each(function(c){var e=function(a,b){b=h.isFunction(b)?b():b,c.style[a]=h.isNumber(b)&&0!=b&&"opacity"!=a?b+"px":b};if(h.isString(a)){if(!h.isNumber(b)&&!h.isString(b))return f.css(c,a,d);e(a,b)}else for(var g in a)a.hasOwnProperty(g)&&e(g,a[g])})},this.width=function(){return c.each(f.width)},this.outerWidth=function(){return c.each(function(a){return a.offsetWidth})},this.height=function(){return c.each(f.height)},this.position=function(){return c.each(f.position)},this.on=function(a,b){a=a.split(" ");for(var d=0;d<a.length;d++)c.bind(a[d],b);return c},this.click=function(a){return c.bind("click",a)},this.hover=function(a,b){return c.bind("mouseenter",a),c.bind("mouseleave",b||a),c},this.each=function(a){for(var b,d=0;d<n.length&&void 0===b;d++)b=a.call(c,n[d],d);return void 0===b?c:b},this.get=function(a){return n[a]},this.find=function(a){var c=[];return h.forEach(n,function(b){c=c.concat(m(a,b))}),new i(c,b)},this.hide=function(){c.css(f.filterOpacity({opacity:0}))};var l=function(a,b){var c,e=j.createElement("style"),f=[],g=[];for(j.documentElement.firstChild.appendChild(e),j._qsa=[],e.styleSheet.cssText=a+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",d.getWindow(j).scrollBy(0,0),e.parentNode.removeChild(e);j._qsa.length;)c=j._qsa.shift(),c.style.removeAttribute("x-qsa"),f.push(c);if(j._qsa=null,b.contains)for(var h=0;h<f.length;h++)b.contains(f[h])&&g.push(f[h]);else g=f;return g},m=function(a,b){var c=[];return h.isString(a)?c=b.querySelectorAll?b.querySelectorAll(a):l(a,b):a&&(a.nodeType||d.isWindow(a))?c=[a]:a&&a.length&&a[0].nodeType&&(c=a),d.toArray(c)},n=m(a,b);c.length=n.length};i.Data={uid:0,expando:"adm-element-uid",cache:{},get:function(a,b){var c=a[i.Data.expando],d=i.Data.cache[c||i.Data.key(a)];return d[b]},set:function(a,b,c){var d=a[i.Data.expando],e=i.Data.cache[d||i.Data.key(a)];e[b]=c},access:function(a,b,c){var d=i.Data.get(a,b);return d||i.Data.set(a,b,d=c),d},key:function(a){var b=a[i.Data.expando]=++i.Data.uid;return i.Data.cache[b]={},b}},b.exports=i},{"./dom-utils":22,"./geometry":31,"./lo":36,"./signal":52,"./utils":64}],21:[function(a,b,c){var d=a("./dom-handler"),e=a("./dom-utils"),f=a("./dom"),g=a("./tweening"),h=a("./lo");d.prototype.fadeIn=function(a,b){return this.animate({opacity:1},a||400,"",b)},d.prototype.fadeOut=function(a,b){return this.animate({opacity:0},a||400,"",b)},d.prototype.animate=function(a,b,c,i){var j=arguments;return this.each(function(a){var b=f(a),c=d.Data.access(a,"tween",{}),i=function(d,f,j,k){h.isFunction(j)&&!k&&(k=j,j="easeOutQuad"),j=j||"easeOutQuad";var l={};for(var m in d)d.hasOwnProperty(m)&&(l[m]=b.css(m,void 0,!0));b.css(l),c.player=new g.Player,c.player.onFrame=function(a){b.css(e.filterOpacity(a))},c.player.onStop=function(){h.isFunction(k)&&k.apply(a),c.animationQueue.shift(),c.animationQueue.length&&i.apply(b,c.animationQueue[0])},c.player.initialize(l,"linear"==j?g.Functions.getIdentity():g.Functions.getNormalizedExtern(j)),c.player.gotoKey(f,d)};c.animationQueue=c.animationQueue||[],c.animationQueue.push(j),1==c.animationQueue.length&&i.apply(b,j)})},d.prototype.stop=function(){return this.each(function(a){var b=d.Data.get(a,"tween");b&&b.player&&(b.animationQueue=[],b.player.stop())})},d.prototype.animateSprite=function(a,b,c){var d=this.width(),e=0,f=this,g=function(){f.css({backgroundPosition:(b-e)*d+"px 0"}),e++,b>e?setTimeout(g,1e3/a):c()};return g(),this},d.prototype.shake=function(a,b,c){return b=b||3,c=c||20,this.each(function(){var d=f(this);d.css("position","relative");for(var e=1;b>=e;e++)d.animate({left:-1*c},a/b/4).animate({left:c},a/b/2).animate({left:0},a/b/4)}),this}},{"./dom":23,"./dom-handler":20,"./dom-utils":22,"./lo":36,"./tweening":62}],22:[function(a,b,c){var d=a("./utils"),e=a("lie"),f=a("./lo"),g={};g.limitLines=function(a,b,c){if(c=c||parseInt(a.getAttribute("adm-lines"),10),b=b||a,c){var e=b.childNodes;if(e&&e.length)for(var f=e.length-1;f>=0;f--){var h=e[f];g.limitLines(a,h,c)}else{var i=b.innerText?"innerText":b.textContent?"textContent":"nodeValue",j=b[i],k=g.css(a,"line-height",!0)*c,l=a.style.height,m=a.style.maxHeight;for(a.style.height="auto",a.style.maxHeight="none";j&&d.trim(j)&&g.height(a)>k;)j="..."!=j?j.replace(/([,;:\.\s]*\S+\s*)$/,"..."):"",b[i]=j;a.style.height=l,a.style.maxHeight=m}}},g.width=function(a){var b;return b=d.isWindow(a)?d.getViewportSize(a.document).width:a.offsetWidth-g.css(a,"padding-left",!0)-g.css(a,"padding-right",!0)-g.css(a,"border-left-width",!0)-g.css(a,"border-right-width",!0)},g.height=function(a){var b;return b=d.isWindow(a)?d.getViewportSize(a.document).height:a.offsetHeight-g.css(a,"padding-top",!0)-g.css(a,"padding-bottom",!0)-g.css(a,"border-top-width",!0)-g.css(a,"border-bottom-width",!0)},g.position=function(a){var b=a.ownerDocument.documentElement,c=d.getWindow(a.ownerDocument),e=a.getBoundingClientRect();return{left:e.left+c.pageXOffset-b.clientLeft,top:e.top+c.pageYOffset-b.clientTop}},g.fontSpy=function(a,b){var c={font:g.css(a,"font-family"),testFont:"Comic Sans MS, monospace",testString:"QW@HhsXJ",delay:50,timeOut:500},f=d.extend(c,b||{}),h=new e(function(b,c){if(f.font=f.font.split(",")[0],f.font){var e=a.ownerDocument,g=e.createElement("span");g.style.position="absolute",g.style.top="-9999px",g.style.left="-9999px",g.style.visibility="hidden",g.style.fontFamily=f.testFont,g.style.fontSize="250px",g.innerHTML=f.testString,e.body.appendChild(g);var h=g.offsetWidth;g.style.fontFamily=f.font+","+f.testFont;var i=function(){var a=g.offsetWidth;h===a?f.timeOut<0?(e.body.removeChild(g),d.log("Failed to load font "+f.font),c({failedFont:f.font})):(setTimeout(i,f.delay),f.timeOut=f.timeOut-f.delay):(e.body.removeChild(g),b("font loaded"))};i()}else b("font loaded")});return h},g.filterOpacity=function(a){var b=d.getInternetExplorerVersion();return"opacity"in a&&b>0&&9>b&&(a.filter="Alpha(opacity="+100*a.opacity+")"),a},g.css=function(a,b,c){b=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var d="",e=a.ownerDocument,h=/-([a-z])/gi,i=b.replace(h,function(a,b){return(b+"").toUpperCase()});if(a.currentStyle){var j=/^-?\d+(?:px)?$/i,k=/^-?\d/,l=a.style;if(d=a.currentStyle[b]||a.currentStyle[i],!j.test(d)&&k.test(d)){var m=l.left,n=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,l.left="fontSize"===i?"1em":d||0,d=l.pixelLeft+"px",l.left=m,a.runtimeStyle.left=n}}else d=e.defaultView&&e.defaultView.getComputedStyle?e.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.style[i];
if(c){var o=parseFloat(d);if(f.isNumber(o))return o;if("line-height"==b||"lineHeight"==b){var p=e.createElement(a.nodeName);p.style.fontSize=g.css(a,"font-size"),p.style.fontFamily=g.css(a,"font-family"),p.style.padding=0,p.style.margin=0,p.style.borderWidth=0,p.style.height="auto",p.style.clear="both",p.innerHTML="&nbsp;",a.parentNode.appendChild(p);var q=p.offsetHeight;return p.parentNode.removeChild(p),q}return 0}return d},g.isVisible=function(a,b,c,d,e,f,h){var i=a.parentNode,j=2;return i&&9===i.nodeType?!0:"0"===g.css(a,"opacity")||"none"===g.css(a,"display")||"hidden"===g.css(a,"visibility")?!1:(("undefined"==typeof b||"undefined"==typeof c||"undefined"==typeof d||"undefined"==typeof e||"undefined"==typeof f||"undefined"==typeof h)&&(b=a.offsetTop,e=a.offsetLeft,d=b+a.offsetHeight,c=e+a.offsetWidth,f=a.offsetWidth,h=a.offsetHeight),i?"hidden"!==g.css(i,"overflow")&&"scroll"!==g.css(i,"overflow")||!(e+j>i.offsetWidth+i.scrollLeft||e+f-j<i.scrollLeft||b+j>i.offsetHeight+i.scrollTop||b+h-j<i.scrollTop)?(a.offsetParent===i&&(e+=i.offsetLeft,b+=i.offsetTop),g.isVisible(i,b,c,d,e,f,h)):!1:!0)},b.exports=g},{"./lo":36,"./utils":64,lie:8}],23:[function(a,b,c){var d=a("./dom-handler"),e=function(a,b){return a instanceof d?a:new d(a,b)};b.exports=e},{"./dom-handler":20}],24:[function(a,b,c){var d=a("./utils"),e=a("lie"),f=a("./dom"),g=a("./lo"),h=function(a,b){g.forEach(a.ads,function(a,c){a.url="_adm_href_"+encodeURIComponent(a.url),a.image="#_adm_src_"+encodeURIComponent(JSON.stringify({product:c,tag:b,src:a.image})),a.thumbnail="#_adm_src_"+encodeURIComponent(JSON.stringify({product:c,tag:b,src:a.thumbnail})),a.imageOrThumbnail="#_adm_src_"+encodeURIComponent(JSON.stringify({product:c,tag:b,src:a.imageOrThumbnail}))})};b.exports=function(a,b,c){var i=this,j=a.config;if(a.tags&&a.tags.length||a.ads&&a.ads.length){j.log.dispatch("products",d.extend([],a.ads,{deep:!0}));var k,l,m,n=b.element.ownerDocument.createElement("div");for(a.tags?g.forEach(a.tags,function(a,b){h(a,b)}):h(a,0),n.innerHTML=c.fn(a).replace(/(<\s*img.*?>)/gi,function(a,b){var c=a.match(/(src)=(?:"|')(?=#_adm_src_)/i);return c?a.replace(c[1],"adm-src"):a}),m=d.toArray(n.children),k=d.toArray(n.getElementsByTagName("a")),l=d.toArray(n.getElementsByTagName("img"));n.firstChild;)b.element.parentNode.insertBefore(n.firstChild,b.element);b.element.parentNode.removeChild(b.element),b.template.js&&b.template.js(function(a,c){return f(a,c||b.element.ownerDocument)},j.placement.formatWindow,j.placement.formatWindow.document,{formatReady:j.placement.onShow}),d.log(j.id,"Content render"),d.setIframeDisplay(j.placement.formatWindow,"inline"),j.cssLoadCouldBeDetected&&(g.forEach(k,function(a){var b=a.getAttribute("href"),c=b&&b.match(/_adm_href_(.*)/);c&&a.setAttribute("adm-href",decodeURIComponent(c[1]))}),g.forEach(l,function(a){var b=a.getAttribute("adm-src")&&a.getAttribute("adm-src").match(/#_adm_src_(.*)/);b&&a.setAttribute("adm-src",decodeURIComponent(b[1]))}),g.forEach(m,function(c){i.run(d.extend({element:c,serviceData:a,products:a.ads||a.tags},b,{overwrite:!1}))}),e.all(i.ready).then(function(a){j.waCfg&&j.placement.formatWindow.aepwa._formatReady.resolve()})["catch"](function(a){d.log(a)}),e.race(i._fontLoad).then(function(){},function(a){d.reloadFontCss(j)})["catch"](function(a){d.log("fonts could not be reloaded")}))}}},{"./dom":23,"./lo":36,"./utils":64,lie:8}],25:[function(a,b,c){var d=a("./utils"),e=a("./lo"),f=a("./service-data"),g=function(a,b,c,g){f.apply(this,arguments);var h=this,i=a.dom,j=function(a){var b=[];return a&&a.length>0&&e.forEach(a,function(a){a.creativeId&&b.push(a.creativeId)}),b.join(",")},k=function(a){return d.formatPrice(a,b.priceFormat,b.currencySymbol)},l=function(a){var b={b:"font-weight: bold",k:"font-style: italic",u:"text-decoration: underline",s:"text-decoration: line-through"},c=a.color?["color: "+a.color]:[];return a.format&&e.forEach(a.format.split(","),function(a){c.push(b[a])}),c=c.join("; ")},m=function(a,c){var f=e.isArray(b.clickAudit)?b.clickAudit[c]:b.clickAudit,g=h.buildClickUrl(e.assign({x:c,r:d.generateKey(8)},a));return g&&f&&(g=d.noCache(f)+encodeURIComponent(g)),g},n=function(a,b){var c="",d=!1;return a=a.split(/,(?!(?:[^\(]*\))|(?:[^\{]*}))/),e.forEach(a,function(a){var f=[];return d=!1,a.replace(/(?:\{([^\{\}\(\)]*)})|(?:\(([^\{\}\(\)]*)\))/g,function(a,c,g){c&&(e.isString(b[c])||e.isNumber(b[c])?""!=b[c]&&f.push(b[c]):d=!0),g&&f.push(g)}),d||(c=f.join(" ")),d}),c},o=function(a,b){return a?a+"/logos/"+b+".png":""},p=function(a,b){return b?a+b:null},q=function(a,c){var e=d.parseQueryParams(d.replaceTokens(a.clk,b,"%","%")),f=d.parseIfJson(a.cfg)||{},g={tag:b,cfg:f,product:a,title:d.parseIfJson(d.decodeHTMLEntities(a.tit)),iprice:k(a.ip),vpc:k(a.ip),ni:a.ni,cdc:a.ni,lprice:k(a.lp),cta:f.cta||"",redirect:b.redirect,style:l(f),thumbnail:d.secureImage(a.thumb||a.img,a.proxy&&b.imageProxy,i)||h.fallbackImage,image:d.secureImage(a.img||a.thumb,a.proxy&&b.imageProxy,i)||h.fallbackImage,description:d.parseIfJson(d.decodeHTMLEntities(a.desc)),pcd:k(a.p),pdl:k(a.lp),dis:a.dis,totalPrice:k(a.p),url:m(e,c),logo:o(i,a.lg),specialStrip:p(i,f.ss),creativeId:e.c,productId:e.pr,hp:!!a.hp};return g.clickQuery=d.parseQueryParams(g.url),g.presets=n((f.presets?f.presets+",":"")+"{cdc}(x){vpc},{pcd},{pdl}",g),g.price=n("{pcd}",g),g};this.isDeferredImpression=!!a.di,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.mediaType="e-commerce",this.config=b,this.ads=e.map(a.ads||[],q),this.vImpEventUrl=h.buildEventUrl("vimp",{c:j(h.ads)}),this.vTimeEventUrl=h.buildEventUrl("vtime",{c:j(h.ads),v:"[time]"})};b.exports=g},{"./lo":36,"./service-data":48,"./utils":64}],26:[function(a,b,c){var d=a("./utils"),e=a("./lo"),f=a("./service-data"),g=function(a,b,c,g){f.apply(this,arguments);var h=this,i=a.dom,j=function(a){return d.formatPrice(a,b.priceFormat,b.currencySymbol)},k=function(a,c,f){var g=e.isArray(b.clickAudit)?b.clickAudit[c]:b.clickAudit,i=h.buildClickUrl(e.assign({x:c,r:d.generateKey(8)},a),f);return i&&g&&(i=d.noCache(g)+encodeURIComponent(i)),i},l=function(a,b){var c="",d=!1;return a=a.split(/,(?!(?:[^\(]*\))|(?:[^\{]*}))/),e.forEach(a,function(a){var f=[];return d=!1,a.replace(/(?:\{([^\{\}\(\)]*)})|(?:\(([^\{\}\(\)]*)\))/g,function(a,c,g){c&&(e.isString(b[c])||e.isNumber(b[c])?""!=b[c]&&f.push(b[c]):d=!0),g&&f.push(g)}),d||(c=f.join(" ")),d}),c},m=function(a){return i?i+"/logos/"+a+".png":""},n=function(a){return a?i+a:null},o=function(a){return d.isAbsPath(a)?a:i+a},p=function(a,c,e){var f=d.parseQueryParams(d.replaceTokens(a.clk,b,"%","%")),g=d.parseIfJson(a.cfg)||{},o={tag:b,cfg:g,product:a,title:d.parseIfJson(d.decodeHTMLEntities(a.tit)),iprice:j(a.ip),vpc:j(a.ip),ni:a.ni,cdc:a.ni,lprice:j(a.lp),cta:g.cta||"",redirect:b.redirect,thumbnail:d.secureImage(a.thumb||a.img,a.proxy&&b.imageProxy,i)||h.fallbackImage,image:d.secureImage(a.img||a.thumb,a.proxy&&b.imageProxy,i)||h.fallbackImage,description:d.parseIfJson(d.decodeHTMLEntities(a.desc)),pcd:j(a.p),pdl:j(a.lp),dis:a.dis,totalPrice:j(a.p),url:k(f,c,e),logo:m(a.lg),specialStrip:n(g.ss),creativeId:f.c,productId:f.pr,hp:!!a.hp};return o.clickQuery=d.parseQueryParams(o.url),o.presets=l((g.presets?g.presets+",":"")+"{cdc}(x){vpc},{pcd},{pdl}",o),o.price=l("{pcd}",o),o},q=function(a,b){return{title:d.decodeHTMLEntities(a.tit),logo:a.lg?m(a.lg):"",url:a.link?o(a.link):"",ads:e.map(a.ads||[],function(a,c){return p(a,c,b)})}};this.isDeferredImpression=!1,this.deferredImpressionHash=null,this.mediaType="e-commerce-group",this.config=b,this.tags=e.map(a.tags||[],q)};b.exports=g},{"./lo":36,"./service-data":48,"./utils":64}],27:[function(a,b,c){var d=a("./utils"),e=a("./dom"),f=a("./params");a("./dom-tweening");var g=function(a,b,c){var g=a.placement.formatWindow.document,h=new f(c,{collapse:null,expand:null,collapseHover:null,collapseSprite:null,collapsed:null,expanded:null,collapsedWidth:null,collapsedHeight:null,expandedWidth:null,expandedHeight:null}),i=h.collapsedWidth||h.collapsedHeight||h.expandedWidth||h.expandedHeight,j=function(){l(),a.tagWindow.parent.closeMastHead&&a.tagWindow.parent.closeMastHead(),a.tagWindow.parent.doCollapse&&a.tagWindow.parent.doCollapse(!0)},k=function(){m(),a.tagWindow.parent.openMastHead&&a.tagWindow.parent.openMastHead(),a.tagWindow.parent.doExpand&&a.tagWindow.parent.doExpand(!0)},l=function(){e(h.expanded,g).css({display:"none"}),e(h.collapsed,g).css({display:"block"}),i&&d.adjustIframeSize(a.placement.formatWindow,h.collapsedWidth||a.width,h.collapsedHeight||a.height)},m=function(){e(h.expanded,g).css({display:"block"}),e(h.collapsed,g).css({display:"none"}),i&&d.adjustIframeSize(a.placement.formatWindow,h.expandedWidth||a.width,h.expandedHeight||a.height)};this.init=function(){if(h.init?"expand"==h.init?k():"collapse"==h.init&&j():(e(h.expanded,g).css({display:"block"}),e(h.collapsed,g).css({display:"block"})),e(h.expand,g).click(k),h.collapseSprite){var b=e(h.collapseHover,g);e(h.collapseSprite,g).animateSprite(9,18,function(){e(h.collapseSprite,g).click(function(){b.css({display:"none"}),j()}).hover(function(){b.css({display:"block",opacity:0}).animate({right:25,opacity:1},300)},function(){b.animate({right:-10,opacity:0},100)})})}else e(h.collapse,g).click(j);var c=a.tagWindow.parent;if(c.HTMLCreative){var d=c.HTMLCreative.admCollapseCommand,f=c.HTMLCreative.admExpandCommand;c.HTMLCreative.admCollapseCommand=function(){l(),d.apply(this,arguments)},c.HTMLCreative.admExpandCommand=function(){m(),f.apply(this,arguments)}}}};b.exports=g},{"./dom":23,"./dom-tweening":21,"./params":40,"./utils":64}],28:[function(a,b,c){var d=a("lie"),e=a("./utils.js"),f={};b.exports="undefined"!=typeof _aep&&_aep.External?_aep.External:{get:function(a,b){return new d(function(c,d){if(b&&b.jsonp){var g=b.jsonp.global?window:f;g[b.jsonp.cbName]=function(a){c({data:a})}}var h=document.createElement("script");b.jsonp.cbParam&&(b.data=b.data||{},b.data[b.jsonp.cbParam]=b.jsonp.cbName),b.data&&(a=a+"?"+e.buildQuery(b.data)),h.src=a,document.getElementsByTagName("head")[0].appendChild(h),"undefined"!=typeof b.timeout&&setTimeout(function(){d({timeout:!0})},b.timeout)})},set:function(a,b){f[a](b)}}},{"./utils.js":64,lie:8}],29:[function(a,b,c){var d=a("./params"),e=a("./dom");a("./dom-tweening");var f=function(a,b,c){var f=e(b),g=f.children(),h=[],i=new d(c,{fadeTime:500,itemDelay:100});this.init=function(){f.on("visible",function(){var a=0;g.each(function(b){h.push(setTimeout(function(){e(b).fadeIn(i.fadeTime)},a)),a+=i.itemDelay}),g.hide()}),f.on("hidden",function(){for(var a=0;a<h.length;a++)clearTimeout(h[a]);h=[],g.hide()}),g.hide()}};b.exports=f},{"./dom":23,"./dom-tweening":21,"./params":40}],30:[function(a,b,c){var d=a("./utils"),e=a("./signal"),f=a("./ad-service"),g=a("./directive"),h=a("./dom"),i=a("./handlebars-helpers")(a("../node_modules/handlebars/dist/cjs/handlebars.runtime")["default"]),j=a("./placement"),k=a("./geometry"),l=a("lie"),m=a("./lo"),n={};n.init=function(a,b){d.log(a.id,"Format init"),a.tagWindow.document.body||a.tagWindow.document.write("<body></body>"),a.tagWindow!=top&&a.tagWindow.document.close();var c=new j(a);if(a.placement=c,a.tagWindow.$sf){var g=a.tagWindow.$sf.ext,h=!0;g.register(a.width,a.height,function(c){"register"!=c&&h&&(h=!1,n.load(a,b))}),h&&g.status&&void 0!=g.status()&&(h=!1,n.load(a,b))}else n.load(a,b);a.onLoaded=a.onLoaded||new e,a.onClickProduct=a.onClickProduct||new e,a.onLoaded.subscribe(function(b){n.write(a,b)}),f.onFormatCancel.subscribe(function(b){b.id==a.id&&a.placement.remove()})},n.refresh=function(a){a.onLoaded=a.onLoaded||new e,a.onLoaded.subscribe(function(b){n.write(a,b)})},n.resizeIframes=function(a){!a.isTopFormat&&a.isOwner&&d.adjustIframeSize(a.tagWindow,a.width,a.height),d.adjustIframeSize(a.placement.formatWindow,a.width,a.height)},n.load=function(a,b){d.log(a.id,"Format load");var c=[],e=m.isArray(a.css)?a.css:[a.css],f=m.isArray(a.externalLib)?a.externalLib:a.externalLib?[a.externalLib]:[],g=h(a.tagWindow.admTopWindow),i=a.pageCss?m.isArray(a.pageCss)?a.pageCss:[a.pageCss]:[];a.impAudit&&d.report(a.impAudit),m.forEach(e,function(b,e){c.push(new l(function(c,e){d.loadCSSFile(b,a.placement.formatWindow,c)}))}),m.forEach(f,function(b){d.loadJSFile(b.url,a.placement.formatWindow),c.push(d.wait(function(){return"undefined"!=typeof a.placement.formatWindow[b.name]},30))}),m.forEach(i,function(b,c){d.loadCSSFile(b,d.getTopAccessWindow(a.placement.formatWindow))}),l.all(c).then(function(c){a.cssLoadCouldBeDetected=m.every(c),b.subscribe(function(b){g.width()>=a.minViewportWidth&&(n.resizeIframes(a),a.startWhenInView?d.poll(function(){return k.isInViewport(a.placement.formatWindow,a.viewThreshold)}).subscribe(function(){a.onLoaded.dispatch(b)}):(a.onLoaded.dispatch(b),d.setIframeDisplay(a.placement.formatWindow,"none"),d.setIframeDisplay(a.tagWindow,"none"),a.isTopFormat&&a.isOwner&&d.hasAccessibleFrameElement(a.tagWindow)&&d.hideNodePersistently(a.tagWindow.frameElement)))})})},n.write=function(a,b,c){d.log(a.id,"Format write"),c=c||a.placement.formatElement,c.innerHTML=i.template(b)({config:a}),g.run({element:c,config:a,template:b})},n.clone=function(a,b){var c=h(b,a.placement.formatWindow.document).get(0),f="aep-position-"+d.generateKey(4),g=a.placement.formatWindow.document.createElement("div");c&&(g.id=f,c.appendChild(g),a.onLoaded=a.onLoaded||new e,a.onLoaded.subscribe(function(b){n.write(a,b,g)}))},b.exports=n},{"../node_modules/handlebars/dist/cjs/handlebars.runtime":1,"./ad-service":9,"./directive":18,"./dom":23,"./geometry":31,"./handlebars-helpers":32,"./lo":36,"./placement":43,"./signal":52,"./utils":64,lie:8}],31:[function(a,b,c){var d=a("./utils"),e=a("./rect"),f=a("./percent"),g={getElementRect:function(a){return new e(a.getBoundingClientRect())},isInViewport:function(a,b,c){if(d.isWindow(a)){if(!d.isAccessible(a.parent)||!a.frameElement)return!0;a=a.frameElement}var e=g.getElementRect(a),f=c?g.transformRect(c,e):e,h=g.getViewportRect(a.ownerDocument),i=g.getIntersection(f,h),j=d.getWindow(a.ownerDocument);return d.isAccessible(j.parent)&&j.frameElement&&i.area>0?g.isInViewport(j.frameElement,b,g.transformRect(i,h)):!!g.getIntersection(f,g.growRect(h,b||0))},intersectsViewport:function(a,b){d.getWindow(a.ownerDocument)!=top&&(a=d.getHigherIframe(a));var c=g.getElementRect(a),e=g.getViewportRect(a.ownerDocument),h=g.getIntersection(c,e);return f.fromAbs(h.area,c.area)>=b},transformRect:function(a,b){return{top:a.top+b.top,bottom:a.bottom+b.top,left:a.left+b.left,right:a.right+b.left}},growRect:function(a,b){return new e({top:a.top-b,bottom:a.bottom+b,left:a.left-b,right:a.right+b})},getViewportRect:function(a){var b=a.documentElement,c=a.body,f=b.clientTop||c.clientTop||0,g=b.clientLeft||c.clientLeft||0,h=d.getViewportSize(a);return new e({top:f,left:g,bottom:h.height+f,right:h.width+g})},getIntersection:function(a){for(var b={left:[],top:[],right:[],bottom:[]},c=0;c<arguments.length;c++)b.left.push(arguments[c].left),b.top.push(arguments[c].top),b.right.push(arguments[c].right),b.bottom.push(arguments[c].bottom);return new e({left:Math.max.apply(Math,b.left),top:Math.max.apply(Math,b.top),right:Math.min.apply(Math,b.right),bottom:Math.min.apply(Math,b.bottom)})}};b.exports=g},{"./percent":42,"./rect":45,"./utils":64}],32:[function(a,b,c){var d=a("./utils"),e=a("./lo");b.exports=function(a){return a.registerHelper("chunk",function(b,c,d){d=d&&d.length?d:[a.helpers.each];var e,f,g=c.hash.size,h=[];for(e=0,f=b.length;f>e;e+=g)h.push(b.slice(e,e+g));return d.shift().apply(this,[h,c,d])}),a.registerHelper("slice",function(b,c,d){d=d&&d.length?d:[a.helpers.each];var e="first"in c.hash?c.hash.first:0,f="last"in c.hash?c.hash.last+1:b.length;if("first"in c.hash&&"last"in c.hash&&"length"in c.hash)throw new Error("Too many options");return"length"in c.hash&&("last"in c.hash?e=f-c.hash.length:f=e+c.hash.length),b=b.slice(e,f),d.shift().apply(this,[b,c,d])}),a.registerHelper("split",function(b,c){if(!e.isString(b))return d.log("split helper - Value"+b+"is not a string"),"";var f=b.split(c.hash.delimiter),g=parseInt(c.hash.index,10);"index"in c.hash&&(f=0>g||g>=f.length?"default"in c.hash?[c.hash["default"]]:[]:[f[g]]);for(var h=0;h<f.length;h++)f[h]=d.trim(f[h]);return c.fn=c.fn||function(a){return a},c.inverse=c.inverse||function(){return""},a.helpers.each.apply(this,[f,c])}),a.registerHelper("toUpperCase",function(a){return a.toUpperCase()}),a.registerHelper("ads",function(b){var c=[];if(b.hash.paginate&&(b.hash.size=b.hash.paginate,c.push(a.helpers.chunk)),c.push(function(b,c){for(var d=0;d<b.length;d++)b[d].first=0==d,b[d].last=d==b.length-1,b[d].firstTwo=2>d,b[d].even=d%2==0,b[d].odd=d%2!=0,b[d].lastOfThree=(d+1)%3==0,b[d].firstOfFive=d%5==0,b[d].secondOfFive=(d+4)%5==0,b[d].thirdOfFive=(d+3)%5==0,b[d].fourthOfFive=(d+2)%5==0,b[d].fifthOfFive=(d+1)%5==0;return a.helpers.each.apply(this,[b,c])}),this.ads.length)return a.helpers.slice.apply(this,[this.ads,b,c]);throw new Error("Helper 'ads' doesn't found the attribute ads at this level")}),a.registerHelper("compare",function(a,b,c){if(arguments.length<3)throw new Error("Helper 'compare' needs 2 parameters");var d=c.hash.operator||"==",e={"==":function(a,b){return a==b},"===":function(a,b){return a===b},"!=":function(a,b){return a!=b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b},"typeof":function(a,b){return typeof a==b}};if(!e[d])throw new Error("Helper 'compare' doesn't know the operator "+d);return e[d](a,b)?c.fn(this):c.inverse(this)}),a.registerHelper("equal",function(a,b,c){if(arguments.length<3)throw new Error("Helper 'equal' needs 2 parameters");return a!==b?c.inverse(this):c.fn(this)}),a.registerHelper("contains",function(a,b,c){for(var b=b.split(","),d=0;d<b.length;d++)b[d]=b[d].trim();return b.length>0&&-1!=b.indexOf(a)?c.fn(this):c.inverse(this)}),a.registerHelper("service",function(b){var c=[],f=[],g=this.config.serviceOptions=this.config.serviceOptions||{},h=d.generateKey(5);return b.hash.paginate&&(b.hash.size=b.hash.paginate,c.push(a.helpers.chunk)),c.push(function(a){return a.unshift("<a adm-show></a>"),a.join("")}),e.forEach(this.config.service,function(a,c){g[h]=b,f.push('<a adm-service=\'{"key": "'+h+'", "index": '+c+"}'></a>")}),a.helpers.slice.apply(this,[f,b,c])}),a.registerHelper("math",function(a,b,c){return a=parseFloat(a),c=parseFloat(c),{"+":a+c,"-":a-c,"*":a*c,"/":a/c,"%":a%c}[b]}),a}},{"./lo":36,"./utils":64}],33:[function(a,b,c){var d=a("./dom"),e=a("./dom-utils"),f=a("./utils"),g=a("lie"),h={};h.preload=function(a,b){return new g(function(c,d){a.onload=function(){c({width:a.width,height:a.height})},a.onerror=d,a.src=b})},h.adjustImageSize=function(a,b,c,g){var h=a.style,i=a.clientWidth,j=a.clientHeight,k=b/c,l=i/j;if(k>l==!g){var m=i/k;h.width=i+"px",h.height=m+"px",g||(h.marginTop=h.marginBottom=(j-m)/2+"px")}else{var n=j*k;h.width=n+"px",h.height=j+"px",g||(h.marginLeft=h.marginRight=(i-n)/2+"px")}var o=function(b){return e.css(a,b)};if(n>i||m>j){var p=a.ownerDocument.createElement("div"),q=p.style;f.extend(q,{width:i+"px",height:j+"px",overflow:"hidden",display:o("display"),position:o("position"),top:o("top"),"float":o("float"),cssFloat:o("float"),marginTop:o("margin-top"),marginBottom:o("margin-bottom"),marginRight:o("margin-right"),marginLeft:o("margin-left"),borderRightColor:o("border-right-color"),borderRightStyle:o("border-right-style"),borderRightWidth:o("border-right-width"),borderLeftColor:o("border-left-color"),borderLeftStyle:o("border-left-style"),borderLeftWidth:o("border-left-width"),borderTopColor:o("border-top-color"),borderTopStyle:o("border-top-style"),borderTopWidth:o("border-top-width"),borderBottomColor:o("border-bottom-color"),borderBottomStyle:o("border-bottom-style"),borderBottomWidth:o("border-bottom-width")}),d(a).css({top:0}),"inline"==q.display&&(q.display="inline-block"),h.border="none",h.margin=0,a.parentNode.insertBefore(p,a),p.appendChild(a)}},b.exports=h},{"./dom":23,"./dom-utils":22,"./utils":64,lie:8}],34:[function(a,b,c){var d=a("./image-utils"),e=a("./utils"),f=a("./dom"),g=a("./params"),h=a("lie"),i=a("./geometry"),j=function(a){var b=a.element,c=a.serviceData.fallbackImage,f=!1,g=a.serviceData.getProduct(a.value.product,a.value.tag).cfg||{},j=new h(function(c,d){a.config.loadImagesWhenInView?e.poll(function(){return i.isInViewport(b.parentNode,a.config.viewThreshold)}).subscribe(c):c()});b.style.visibility="hidden";var l=j.then(function(e){return d.preload(b,a.value.src)["catch"](function(a){return f=!0,d.preload(b,c)})}).then(function(c){return a.config.disableAdjustImages||d.adjustImageSize(b,c.width,c.height,!f&&g.zoom),b.style.visibility="visible",h.resolve(b)})["catch"](function(b){return a.config.log.dispatch("error",b),h.reject("Image load could not be detected")});return a.config.loadImagesWhenInView&&k(a,l),l},k=function(a,b){var c=a.element,d=new g(a.scope,{loaderWidth:30,loaderHeight:7,loaderColor:"#48A500",loaderBackColor:"#D4D4D4"});c.insertAdjacentHTML("beforebegin",'<div class="adm-loader"><div class="adm-loader-wrapper"><div class="adm-loader-full"></div></div></div>');var e=!1,h=f(c.previousSibling),i=f(c.previousSibling.firstChild),j=f(c.previousSibling.firstChild.firstChild);h.css({width:"100%",height:"100%",position:"relative"}),i.css({top:"50%",left:"50%",width:d.loaderWidth,height:d.loaderHeight,position:"absolute",overflow:"hidden",marginTop:-d.loaderHeight/2,marginLeft:-d.loaderWidth/2,backgroundColor:d.loaderBackColor}),j.css({width:0,height:d.loaderHeight,position:"absolute",backgroundColor:d.loaderColor}),function k(){e||j.animate({width:d.loaderWidth},500,function(){j.animate({width:0,left:d.loaderWidth},500,function(){j.animate({left:0},0,k)})})}(),b.then(function(){e=!0,h.fadeOut(200)})};b.exports=j},{"./dom":23,"./geometry":31,"./image-utils":33,"./params":40,"./utils":64,lie:8}],35:[function(a,b,c){var d=a("./dom"),e=a("./utils"),f=a("./lo"),g=function(a){var b=a.nextSibling;if(b){if(b.nodeType==document.TEXT_NODE&&!/\r|\n/.test(b.nodeValue)||b.nodeType==document.ELEMENT_NODE&&"none"!=d(b).css("display"))return b;b=g(b)}return b},h=function(a){var b=g(a);return b?a:h(a.parentNode)},i=function(a){var b=0,c=0,f=a,g=a.previousElementSibling,h=g?d(g).css("marginBottom",!0,!0):0,i=f?d(f).css("marginTop",!0,!0):0;if(h&&!i)c=h;else if(!h&&i)b=i;else if(!h&&!i){var j=d(a).css("lineHeight",!0,!0),k=d(f).css("height",!0,!0);b=f&&(e.isNear(k,j,1)||"BR"==f.nodeName)?j:c=j}return[b,c]};b.exports={setFormatMargin:function(a,b){d(a.firstElementChild.nextElementSibling||a.firstElementChild).css({marginTop:(b.top||0)+"px",marginBottom:(b.bottom||0)+"px"})},getMargin:function(a,b){var c;return c=b.waCfg.margin?f.map(b.waCfg.margin.replace("px","").split("|"),function(a){return parseInt(a)},[]):i(a),{top:c[0],bottom:c[1]}},getInsertionNode:function(a){var b=h(a),c=g(b),d=null;if(c&&"BR"==c.nodeName){var e=g(c);if(e&&"BR"==e.nodeName){var f=g(e);f&&f.nodeType==document.TEXT_NODE&&(d=c)}}return d||(d=b.nextElementSibling),d}}},{"./dom":23,"./lo":36,"./utils":64}],36:[function(a,b,c){var d={isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},forEach:function(a,b){if(d.isNumber(a.length))for(var c=0;c<a.length&&b(a[c],c)!==!1;c++);else for(var e in a)if(a.hasOwnProperty(e)&&b(a[e],e)===!1)break},map:function(a,b){var c=[];return d.forEach(a,function(){c.push(b.apply(this,arguments))}),c},reduce:function(a,b,c){return c="undefined"==typeof c?0:c,d.forEach(a,function(){c=b.apply(a,[c].concat(Array.prototype.slice.call(arguments)))}),c},filter:function(a,b){var c=[];return d.forEach(a,function(d){b.apply(a,arguments)&&c.push(d)}),c},find:function(a,b){var c;return d.forEach(a,function(d){return b.apply(a,arguments)?(c=d,!1):void 0}),c},every:function(a,b){b=b||function(a){return!!a};var c=null;return this.forEach(a,function(){return null===c&&(c=!0),c=!(!c||!b.apply(a,arguments))}),c},some:function(a,b){return!!d.find(a,b)},assign:function(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a}};b.exports=d},{}],37:[function(a,b,c){a("./manager"),_aep.push(["core","aep-formats-20.0.2",{Format:a("./format")}]),_aep.External=a("./external"),_aep.utils=a("./lo").assign({},a("./utils"),a("./lo")),_aep.deferredImp||(_aep.deferredImp=new(a("lie"))(function(a,b){_aep._resolveDeferredImp=a,_aep._rejectDeferredImp=b}))},{"./external":28,"./format":30,"./lo":36,"./manager":38,"./utils":64,lie:8}],38:[function(a,b,c){var d=a("./utils"),e=a("./lo"),f=a("./signal"),g=function(a){var b={},c={},e={},g={},h=new f(!0),i=this,j=function(a,b){var d=a.core.match(/aep\-\w+\-\d+\.\d+\.\d+/).join();c[d]=c[d]||new f,c[d].subscribe(b)};for(this.tag=function(a,c){b[a]=c},this.format=function(a){a.inline&&(a.waCfg=a.inline),a.forceDefault||d.extend(a,b[a.id]),a.tagWindow=window,a.tagWindow.admTopWindow=d.getTopAccessWindow(),a.tagWindow.admTopWindow.admTopWindow=a.tagWindow.admTopWindow,a.log=h;var c=a.templateId||a.template.match(/([^\/]+)\.min\.js/).pop();e[c]=e[c]||new f,j(a,function(b){b.Format.init(a,e[c])}),g[a.id]=g[a.id]||new f,g[a.id].dispatch(a),a.waCfg&&(a.isTopFormat=!0)},this.template=function(a,b,c){b.js=c,e[a]=e[a]||new f,e[a].dispatch(b)},this.core=function(a,b){c[a]=c[a]||new f,c[a].dispatch(b)},this.refresh=function(a,b){g[a]=g[a]||new f,g[a].subscribe(function(a){j(a,function(c){d.extend(a,b||{}),c.Format.refresh(a)})})},this.clone=function(a,b){g[a]=g[a]||new f,g[a].subscribe(function(a){j(a,function(c){c.Format.clone(a,b)})})},this.log=function(a){h.subscribe(a)},this.push=function(a){i[a[0]]&&i[a[0]].apply(i,a.slice(1))},h.subscribe(function(a,b){("warn"==a||"error"==a)&&d.log(b)});a&&a.length;)i.push(a.shift())};(!window._aep||e.isArray(window._aep))&&(window._aep=new g(window._aep)),b.exports=g},{"./lo":36,"./signal":52,"./utils":64}],39:[function(a,b,c){var d=a("./signal"),e=a("./utils"),f=function(a,b,c){var f=new d(!0),g=e.getFullDomain(c);e.addEventListener(a,"message",function(a){a.origin==g&&f.dispatch(e.parseIfJson(a.data))}),this.send=function(a,c){b.postMessage(JSON.stringify(c),g)},this.receive=function(a){f.subscribe(a)}};f.isSupported=function(){return"function"==typeof window.postMessage},b.exports=f},{"./signal":52,"./utils":64}],40:[function(a,b,c){var d=a("./lo"),e=function(a,b){var c=this;this.add=function(a){d.forEach(a,function(a,b){c[b]=c[b]||a})},d.forEach(a,function(a,b){for(var d=[],e=0;e<a.length;e++)d.push(a[e].value||a[e].element);c[b]=d.length>1?d:d[0]}),c.add(b)};b.exports=e},{"./lo":36}],41:[function(a,b,c){var d=function(a,b,c,d){this.useIframe=b.passback.useIframe,this.url=b.passback.src,this.mediaType="passback",this.config=b};b.exports=d},{}],42:[function(a,b,c){var d={fromAbs:function(a,b){return Math.round(100*a/b)},toAbs:function(a,b){return Math.round(a/100*b)}};b.exports=d},{}],43:[function(a,b,c){var d=a("./utils"),e=a("./signal"),f=a("./dom"),g=a("./aspect-ratio"),h=a("./split-placement"),i=function(a){var b,c=this,i="aep-placement-"+a.id,j=a.tagWindow,k=j.admTopWindow,l={top:0,bottom:0},m=function(){var a;try{a=(j.document.body.id.match(/dapIfM\d(?:Child)?$/)||j.frameElement.id.match(/atwAdFrame\d(?:Child)?$/)).join()}catch(b){}return a?j.parent.document.getElementById(a):null},n=function(){var b;return a.isTopFormat?(b=k.document.createElement("div"),b.id=i,b.className="aep-ads",a.waCfg&&f(b).css({overflow:"hidden",height:"0",marginTop:"0",paddingTop:"0",marginBottom:"0"}).addClass("aep-inline")):(i+="-frame",b=j.document.createElement("iframe"),b.id=i,b.className="aep-ads",b.border="0",b.frameBorder="0",b.marginWidth="0",b.marginHeight="0",b.leftMargin="0",b.topMargin="0",b.style.cssText="border: 0; overflow: hidden; width: 0px; height: 0px"),f(b).css({display:"none"}),b},o=function(b,d){f(c.rootElement).animate({height:b+"px"},a.waCfg.animDuration||800,"easeOutCubic",d)},p=function(){var b=c.rootElement;b.parentNode&&b.parentNode.removeChild(b),a.waCfg&&c.formatWindow.aepwa._formatReady.reject("format removed"),a.removed=!0,c.onAfterRemove.dispatch()},q=function(){if(c.rootElement=n(),c.topWindow=k,c.tagWindow=j,c.aspectRatio=new g,c.insert(),a.isTopFormat)c.formatWindow=k,c.formatElement=c.rootElement,c.viewableElement=c.rootElement;else{var b=c.rootElement.contentWindow;b.document.write("<!DOCTYPE html><html><head></head><body></body></html>"),b.document.close(),b.admTopWindow=k,c.formatWindow=b,c.formatElement=b.document.body,c.viewableElement=d.getOuterAccessibleFrame(b)}},r=function(){return c.aspectRatio.isEnabled()?c.aspectRatio.getHeight():a.height+l.top+l.bottom};this.makeItFloat=function(d,e){l=e||l,b=new h(d||c.getTargetNode(),l,a.waCfg?a.waCfg.animDuration:null),b.createMaster(),b.setSlave(c.rootElement),b.start(),c.aspectRatio.setReferenceElement(b.getMaster(),l)},this.insert=function(a,b,d){l=b||l,a=a||c.getTargetNode();var e=a;"BODY"==a.nodeName.toUpperCase()||d?a=null:e=a.parentNode,e.insertBefore(c.rootElement,a),c.aspectRatio.setReferenceElement(c.rootElement)},this.show=function(b,e){f(c.rootElement).css({display:a.isTopFormat?"inline-block":"block"}),e&&c.aspectRatio.setRatio(e),b?e?(c.aspectRatio.scaleInnerElements(),c.slide(r(),function(){c.aspectRatio.start()})):c.slide(r()):e&&c.aspectRatio.start(),d.callIfFunction(_aep._resolveDeferredImp),c.onShow.dispatch()},this.slide=function(a,c){o(a,c),b&&b.slide(a)},this.remove=function(a){c.aspectRatio&&c.aspectRatio.stop(),c.onBeforeRemove.dispatch(),a?o(0,p):p(),b&&b.remove(a)},this.getTargetNode=function(){var b,e=a.isTopFormat?k:j;return a.isTopFormat&&(a.waCfg?b=e.document.body:(b=m(e.document),b||c.rootElement.ownerDocument==j.document||(b=j.frameElement))),b||(b=e.document.getElementById(a.id)),b&&e.document.body.contains(b)||(d.log("Tag cannot be found into the body"),b=e.document.body.firstChild||e.document.body),b},this.getWaNode=function(){return k.aepwa.target},this.onShow=new e(!0),this.onAfterRemove=new e(!0),this.onBeforeRemove=new e(!0),q()};b.exports=i},{"./aspect-ratio":10,"./dom":23,"./signal":52,"./split-placement":54,"./utils":64}],44:[function(a,b,c){var d=a("./dom"),e=a("./params"),f=function(a,b,c,f){var g=new e(c,{close:null,autoClose:null}),h=function(){a.placement.remove(!!a.waCfg)},i=function(){g.autoClose&&setTimeout(h,1e3*g.autoClose)};this.init=function(){c.close&&d(g.close).on("click",h),a.placement.onShow.subscribe(i)}};b.exports=f},{"./dom":23,"./params":40}],45:[function(a,b,c){var d=a("./lo"),e=function(a){a=a||{},this.left=d.isNumber(a.left)?a.left:d.isNumber(a.right)?a.right-a.width:0,this.top=d.isNumber(a.top)?a.top:d.isNumber(a.bottom)?a.bottom-a.height:0,this.right=d.isNumber(a.right)?a.right:d.isNumber(a.width)?(a.left||0)+a.width:0,this.bottom=d.isNumber(a.bottom)?a.bottom:d.isNumber(a.height)?(a.top||0)+a.height:0,this.width=this.right-this.left,this.height=this.bottom-this.top,this.area=Math.max(this.width,0)*Math.max(this.height,0)};b.exports=e},{"./lo":36}],46:[function(a,b,c){var d=a("./utils.js"),e=function(a,b,c){this.reportViewableImpression=function(){d.report(d.replaceTokens(c.vImpEventUrl,{rnd:d.generateNumericKey(6)}))},this.reportViewableTime=function(a){d.report(d.replaceTokens(c.vTimeEventUrl,{rnd:d.generateNumericKey(6),time:d.msToSec(a)}))},this.reportDeferredImpression=function(a){d.report(b+"?"+d.buildQuery({di:a,r:d.generateNumericKey(6)}))}};b.exports=e},{"./utils.js":64}],47:[function(a,b,c){var d=a("./utils"),e=a("./signal"),f={_instances:{},get:function(a,b,c){var e=c?b.admTopWindow:f._instances,g="_aep_request_"+(c||d.generateKey(6));return e[g]||(e[g]=new f.Instance(a,b))},Instance:function(a,b){var c=new e,f=new e;this._registerCallback=function(a,c,d){if(a[c]){for(var e=a[c].split("."),f=b;e.length>1;){var g=e.shift();f=f[g]=f[g]||{}}for(var h=e.shift(),i="";f[h+i];)i++;f[h+i]=d,
a[c]+=i}},this.subscribe={cb:c.subscribe,ccb:f.subscribe},a.parameters.cb=a.parameters.cb||"aep.ads",this._registerCallback(a.parameters,"cb",c.dispatch),this._registerCallback(a.parameters,"ccb",f.dispatch);var g={};for(var h in a.parameters)if(a.parameters.hasOwnProperty(h))switch(h){case"cb":g[h]="aep.ads"==a.parameters.cb?"":a.parameters.cb;break;case"trg":g[h]=a.parameters.trg;break;default:g[h]=a.parameters[h]}g.rnd=d.generateNumericKey(5);var i=a.base+"?"+d.buildQuery(g);d.loadJSFile(i,b)}};b.exports=f},{"./signal":52,"./utils":64}],48:[function(a,b,c){var d=a("./utils"),e=a("./lo"),f=a("./devices");b.exports=function(a,b,c,g){var h=this;this.fallbackImage=b.fallbackImage||(d.isSecure(b.template)?"https://s-akfs.nspmotion.com/aep/css/imgs/aep-img-404-70x70.gif":"http://akfs.nspmotion.com/aep/css/imgs/aep-img-404-70x70.gif"),this.contextId=g,this.t=c.parameters.t||a.t,this.imp=a.imp||null,this.getProduct=function(a,b){return h.tags?h.tags[b].ads[a]:h.ads[a]},this.tGroup=e.map(a.tags||[],function(a){return a.t}),this.impGroup=e.map(a.tags||[],function(a){return a.imp}),this.buildEventUrl=function(a,c,f){return b.reporting+"?"+d.buildQuery(e.assign({t:(e.isNumber(f)?h.tGroup[f]:h.t)||null,e:a||"[event]",imp:(e.isNumber(f)?h.impGroup[f]:h.imp)||null,ctx:g,r:"[rnd]"},c))},this.buildClickUrl=function(a,c){return b.click+"?"+d.buildQuery(e.assign({t:(e.isNumber(c)?h.tGroup[c]:h.t)||null,imp:(e.isNumber(c)?h.impGroup[c]:h.imp)||null,ptv:b.shareDevice?f[b.deviceName]:null,r:"[rnd]"},a))}}},{"./devices":17,"./lo":36,"./utils":64}],49:[function(a,b,c){var d=a("./utils"),e=a("./ad-service"),f=a("./dom"),g={"e-commerce":a("./ecommerce-content"),"e-commerce-group":a("./ecommerce-content"),"native-buyer":a("./ecommerce-content"),"third-party-buyer":a("./third-party-content"),video:a("./creative-content"),display:a("./creative-content"),passback:a("./third-party-content")};b.exports=function(a){var b=this,c=a.config,h=f(c.tagWindow.admTopWindow),i=c.service[a.value.index],j=c.serviceOptions[a.value.key],k=i.parameters;d.log(c.id,"Service directive"),k.q&&k.q.hasOwnProperty("max")&&(k.q=Math.min(k.q.max,Math.floor((h.height()-k.q.offset)/k.q.height)));var l=e.create(c,i);f(a.element).on("show",function(){l.require(function(f){try{f?g[f.mediaType]?g[f.mediaType].call(b,f,a,j):d.log("No content for the mediaType",f.mediaType):(e.onFormatCancel.dispatch(c),d.log(c.id,"Nothing to show"))}catch(h){c.log.dispatch("error",h)}},d.report)})}},{"./ad-service":9,"./creative-content":15,"./dom":23,"./ecommerce-content":24,"./third-party-content":60,"./utils":64}],50:[function(a,b,c){var d=a("./params"),e=a("./utils"),f=a("./dom");a("./dom-tweening");var g=function(a,b,c){var h,i,j,k,l,m,n=new d(c,{tabWidth:38,animationTime:350,reminderExpandDuration:100,autoCollapseTime:6e4,collapsedState:{tab:{right:-153},reminder:{right:-4}},expandedState:{tab:{right:-32},reminder:{right:-36}},openInterval:100}),o=f(a.placement.formatWindow),p=n.collapsedState,q=!0,r=e.isSafari(),s=a.placement.formatWindow.document,t=function(b){if(q){var c=a.minViewportWidth-2*n.tabWidth,d=(o.width()-c)/2,e=i.width();b+e>d&&(b=d-e)}return b},u=function(){h.animate(n.collapsedState.reminder,n.animationTime,"easeOutBack"),i.animate(n.collapsedState.tab,n.animationTime,"easeOutBack"),p=n.collapsedState,q=!0,k.removeClass("open-ad"),l.css({top:3}),m.stop()},v=function(a){a?(p!=n.expandedState&&(q=!1),h.animate(n.expandedState.reminder,n.reminderExpandDuration,"linear")):h.css(n.expandedState.reminder),i.animate(n.expandedState.tab,n.animationTime,"easeInOutBack",function(){r||k.each(function(a,b){a=f(a),setTimeout(function(){a.addClass("open-ad"),a.removeClass("perspective-initial")},b*n.openInterval)})},function(a){return a.right=t(a.right),a}),r||k.addClass("perspective-initial"),p=n.expandedState,m.start()};this.init=function(){if(h=f("#reminder",s),i=f("#sidetabs-content",s),j=f("#btn-close",s),k=f(".st-ad",s),l=f(".ad-content",s),m=new g.Showcase(l),h.click(u).on("mouseover",function(){v(!0)}).css(n.collapsedState.reminder),j.click(u).hover(function(){f(this).addClass("closeExpanded")},function(){f(this).removeClass("closeExpanded")}),k.on("mousedown",function(){f(this).addClass("pressed-ad")}).on("mouseout mouseup",function(){f(this).removeClass("pressed-ad")}),void 0!==a.placement.formatWindow.document.documentElement.onmouseenter)l.hover(function(a){(a.srcElement||a.target)==this&&(m.stop(),m.open(this))},function(a){(a.srcElement||a.target)==this&&(m.close(this),m.start())});else{var b;l.each(function(c){var d=c.parentNode.parentNode;f(d).bind("mouseover",function(){c!=b&&(b&&m.close(b),b=c,m.stop(),m.open(b))}),f(a.placement.formatWindow).on("mousemove",function(a){b&&!e.inRect(a.clientX,a.clientY,b.parentNode.parentNode.getBoundingClientRect())&&(m.close(b),m.start(),b=null)})})}o.on("resize",function(){i.css({right:t(p.tab.right)})}),v(!1),setTimeout(u,n.autoCollapseTime)}};g.Showcase=function(a){var b,c,d,e=this;this.start=function(){d=0,!c&&a.length>1&&(b=-1,c=setInterval(e.next,1500))},this.stop=function(){c&&(clearInterval(c),c=null,b>=0&&e.close(a.get(b)))},this.next=function(){a.length&&(b>=0&&e.close(a.get(b)),b++,b>=a.length&&(b=0,d++),2>d?e.open(a.get(b)):(b=-1,e.stop()))},this.open=function(a){f(a).animate({top:-114},100,"easeInOutCubic")},this.close=function(a){f(a).animate({top:2},100,"easeInOutCubic")}},b.exports=g},{"./dom":23,"./dom-tweening":21,"./params":40,"./utils":64}],51:[function(a,b,c){var d=a("./tweening"),e=a("./dom"),f=function(a){var b,c=function(a,b){this.tabRight=a,this.reminderLeft=b},f=38,g=500,h=6e4,i=a.minViewportWidth-2*f,j=new d.Player,k=new c(-115,0),l=new c(0,28),m=k,n=!0,o=a.placement.formatWindow.document,p=function(){return(e(a.placement.formatWindow).width()-i)/2},q=function(a,c){if(n){var d=p(),e=k.tabRight-b.width()+c;a-e>d&&(a=d+e)}return a},r=function(){j.isPlaying()||(m=k,n=!0,j.initialize({tabRight:l.tabRight,reminderLeft:l.reminderLeft},d.Functions.getNormalizedExtern("easeOutBack")),j.gotoKey(g,{tabRight:k.tabRight,reminderLeft:k.reminderLeft}))},s=function(a){j.isPlaying()||(a&&m!=l&&(n=!1),m=l,j.initialize({tabRight:k.tabRight,reminderLeft:k.reminderLeft},d.Functions.getNormalizedExtern("easeInOutBack")),j.gotoKey(g,{tabRight:l.tabRight,reminderLeft:l.reminderLeft}))};this.init=function(){var c=e("#btn-close",o),d=e("#sidetabs-content",o);b=e("#reminder",o),d.css({right:k.tabRight}),b.css({left:k.reminderLeft}),j.onFrame=function(a){d.css({right:q(a.tabRight,a.reminderLeft)}),b.css({left:a.reminderLeft})},s(!1),c.click(r),b.click(r),b.on("mouseover",function(){s(!0)}),c.on("mouseover",function(){c.addClass("closeExpanded")}),c.on("mouseout",function(){c.removeClass("closeExpanded")}),setTimeout(r,h),e(a.placement.formatWindow).on("resize",function(){d.css({right:q(m.tabRight,m.reminderLeft)})})}};b.exports=f},{"./dom":23,"./tweening":62}],52:[function(a,b,c){var d=function(a){var b,c=[],d=this;this.dispatch=function(e){for(var f=0;f<c.length;f++)c[f].apply(d,arguments);a||(c=[],b=arguments)},this.subscribe=function(e){return b&&!a?e.apply(d,b):c.push(e),d}};b.exports=d},{}],53:[function(a,b,c){var d=a("./params"),e=a("./dom");a("./dom-tweening");var f=function(a,b,c){var f,g,h,i,j,k,l,m=this,n=0,o=a.placement.formatWindow.document,p=new d(c,{autoMoveTime:5e3,moveDuration:500,itemsPerPage:1,buttonEnabledClass:"active",buttonDisabledClass:"null",progressUpdateInterval:30,pagesContainer:null,progressBar:null,rightButton:null,leftButton:null,buttonsContainer:null,numberOfPages:null}),q=e(p.pagesContainer,o),r=function(a){var b=0,c=0;return q.children().each(function(d,f){f==a&&(b=c),c+=e(d).outerWidth()}),b},s=function(){k-1>n&&u(1)},t=function(){n>0&&u(-1)},u=function(a){m._setPage(n+a)};this._switchPage=function(a,b){q.animate({marginLeft:-r(b)},p.moveDuration)},this._setPage=function(a){m._switchPage(n,a),n=a,m._updateButtons(),w(),e(q.children().get(a)).trigger("show")};var v=function(){var a=(new Date-j)/p.autoMoveTime;1>a&&e(p.progressBar,o).css({width:100*a+"%"})},w=function(){p.autoMoveTime>0&&(f&&clearTimeout(f),j=new Date,!g&&p.progressBar&&(g=setInterval(v,p.progressUpdateInterval)),f=n==k-1?setTimeout(x(u,-k+1),p.autoMoveTime):setTimeout(s,p.autoMoveTime))},x=function(a,b){var c=[];return c.push.apply(c,arguments),c.shift(),function(){a.apply(this,c)}},y=function(a){a.addClass(p.buttonEnabledClass),a.removeClass(p.buttonDisabledClass)},z=function(a){a.removeClass(p.buttonEnabledClass),a.addClass(p.buttonDisabledClass)};this._bindButtons=function(){p.rightButton&&p.leftButton&&(h=e(p.rightButton,o),i=e(p.leftButton,o),y(h),z(i),h.click(s),i.click(t)),p.buttonsContainer&&(l=e(p.buttonsContainer,o).children(),l.each(function(a,b){e(a).click(function(){m._setPage(b)})}))},this._updateButtons=function(){i&&h&&(0==n?z(i):y(i),n==k-1?z(h):y(h)),l&&(l.removeClass(m.params.buttonEnabledClass),e(l.get(m._getCurrentPage())).addClass(m.params.buttonEnabledClass))},this._getCurrentPage=function(){return n},this.init=function(){k=p.numberOfPages||e(p.pagesContainer,o).children().length/p.itemsPerPage,m._bindButtons(),m._updateButtons(),w()},this.params=p};b.exports=f},{"./dom":23,"./dom-tweening":21,"./params":40}],54:[function(a,b,c){var d=a("./dom"),e=function(a,b,c){var e,f,g,h=function(){var a=d(g).position();d(f).css({width:g.offsetWidth+"px",height:g.offsetHeight-b.top-b.bottom+"px",position:"absolute",left:a.left+"px",top:a.top+"px"})},i=function(){g.parentNode.removeChild(g)};this.createMaster=function(){g=a.ownerDocument.createElement("div"),d(g).addClass("adm-master-placement"),d(g).css({height:0}),a.parentNode.insertBefore(g,a)},this.remove=function(a){clearInterval(e),a?d(g).animate({height:0},c||800,"easeOutCubic",i):i()},this.slide=function(a,e){d(g).animate({height:a+b.top+b.bottom+"px"},c||800,"easeOutCubic",e)},this.setSlave=function(a){f=a,d(f).addClass("adm-slave-placement")},this.getMaster=function(){return g},this.start=function(){h(),e=setInterval(h,50)}};b.exports=e},{"./dom":23}],55:[function(a,b,c){var d=a("./cookie"),e=a("./utils"),f=function(a){var b,c=new d(a.name),f=-1,g=function(a,b){return a=a.slice(-b)},h=function(b){c.setCookie(b.join(a.separator),e.addDaysToDate(new Date,a.expirationDays))};this.getValues=function(){var b=c.getCookie();return b?g(b.split(a.separator),a.maxRecords):[]},this.getCurrentValue=function(){return b[f]},this.setCurrentValue=function(a){b[f]=a,h(b)},this.addRecord=function(){b.push(0),b=g(b,a.maxRecords),f=b.length-1,h(b)},b=this.getValues()};b.exports=f},{"./cookie":14,"./utils":64}],56:[function(a,b,c){var d=a("./utils"),e=a("./messenger"),f=function(){var a=d.getInternetExplorerVersion();return-1==a||a>=9},g=function(){var a=d.iOSVersion();return!a||a[0]>=10},h=function(){return e.isSupported()&&f()&&g()},i=function(){return h()&&!!document.createElement("video").canPlayType},j=function(){var a=[];return h()||a.push(2),i()||a.push(3),a.join()};b.exports={getUMT:j}},{"./messenger":39,"./utils":64}],57:[function(a,b,c){var d=a("./cookie"),e=a("./utils"),f=function(a,b){var c="byr"+(b||"")+a,f=new d(c);this.isEmpty=function(a){return"undefined"==typeof a},this.isDisabled=function(){return"1"==f.getCookie()},this.disableTarget=function(a){var a=a||15;f.setCookie("1",e.addMinutesToDate(new Date,a))}};b.exports=f},{"./cookie":14,"./utils":64}],58:[function(a,b,c){var d=a("./utils"),e=a("lie"),f=a("./target-disabler"),g=a("./lo"),h=function(a,b,c){var h=new f(c,"crt");b.admCrtEndPoint=b.admCrtEndPoint||{};var i=function(a){return"/"==a.slice(-1)?a:a+"/"},j=function(a,b){for(var c=0;c<b.length;c++)if(i(a)==i(b[c]))return!0;return!1},k=function(a,c,f,g){return new e(function(e,h){var i=d.generateKey(10);b[i]=function(a){clearTimeout(l),0!==a.response_status||g&&j(a.advertiser.domain,g)?h():(b.admCrtEndPoint[c]=a,e("crt"+c+"=1"))};var k=a+"?"+d.buildQuery({zoneid:c,callback:i,publisherid:null});d.loadJSFile(k,b);var l=setTimeout(h,f||3e4)})},l=function(a){return new e(function(b,c){"undefined"!=typeof a&&-1!=a.indexOf("=")?b(a):c()})},m=function(a,c){var d=!!b.rmnsel;return d&&c&&b.rmnsel.request(c,{service:a,timeout:1e4,cookieExpiration:15}),new e(function(a,e){d&&b.rmnsel.get(c)?a("rmn"+c+"=1"):e()})},n=function(a){return new e(function(b,c){a.then(b,b)})};this.getTargets=function(){var b,c=[];return g.forEach(a,function(a,f){switch(f){case"criteoEndPoint":if(!h.isDisabled()){for(var i,j=[],o=0;o<a.zoneId.length;o++)b=k(a.url,a.zoneId[o],a.requestWait,a.blackList),i=n(b),j.push(i),c.push(i);e.all(j).then(function(b){g.every(b,h.isEmpty)&&h.disableTarget(a.disableTime)})["catch"](function(){d.log("Error disabling target")})}break;case"criteoRta":b=l(a.value),c.push(n(b));break;case"rmn":b=m(a.url,a.rmnTag),c.push(n(b));break;case"custom":b=new e(function(b,c){b(a+"=1")}),c.push(n(b))}}),e.all(c)}};b.exports=h},{"./lo":36,"./target-disabler":57,"./utils":64,lie:8}],59:[function(a,b,c){var d=function(a,b){var c=this,d=function(){return b.fs+"files/byr/"+c.buyerId+".css"};this.css=b.byrCss?d():"",this.url=b.fs+"files/byr/"+a.byr+".js",this.buyerId=a.byr,this.mediaType="third-party-buyer",this.config=b};b.exports=d},{}],60:[function(a,b,c){var d=a("./utils"),e=a("./ad-service");b.exports=function(a,b,c){var f=a.config,g=f.placement;e.onFormatCancel.dispatch(f);var h=function(b){var c,e=b.ownerDocument,h=d.getWindow(e),i=e.createElement("div");"third-party-buyer"==a.mediaType||"passback"==a.mediaType&&a.useIframe?(c=e.createElement("iframe"),c.style.overflow="hidden",c.border="0",c.frameBorder="0",c.marginWidth="0",c.marginHeight="0",c.leftMargin="0",c.topMargin="0",c.style.width=f.width+"px",c.style.height=f.height+"px",f.isTopFormat&&(i.style.textAlign="center",i.style.width="100%",-1==c.style.cssText.indexOf("width")?c.style.cssText=c.style.cssText.replace(/width: ?.+?;/,"width: "+f.width+"px!important"):c.style.cssText+="width: "+f.width+"px!important"),i.appendChild(c),b.parentNode.insertBefore(i,b),c.contentWindow.document.write("<!DOCTYPE html><html><head></head><body style='overflow:hidden'><script src='"+a.url+"'></script></body></html>"),f.byrCss&&d.loadCSSFile(a.css,c.contentWindow,null),g.viewableElement=d.getOuterAccessibleFrame(c.contentWindow)):a.useIframe||d.loadJSFile(a.url,h),d.setIframeDisplay(h,"inline")};f.waCfg?g.getWaNode().then(function(a){h(a)},function(a){d.log(a)}):h(g.getTargetNode())}},{"./ad-service":9,"./utils":64}],61:[function(a,b,c){var d=a("./signal.js"),e=function(a,b){var c,e,f=this,g=0,h=0,i=function(){return Math.round(performance.now())},j=function(){var b=i(),d=b-c;a&&d>15*a&&(d=a),g+=d,h+=d,c=b};this.reset=function(){g=0,c=i()},this.getElapsedTime=function(){return f.isRunning&&j(),b&&g>=b?b:g},this.getPartialTime=function(){return f.isRunning&&j(),b&&h>=b?b:h},this.start=function(){f.isRunning||(f.onStart.dispatch(),h=0,c=i(),f.isRunning=!0,a&&(e=setInterval(function(){j(),f.tick.dispatch()},a)))},this.stop=function(){f.isRunning&&(clearInterval(e),f.isRunning=!1,f.onStop.dispatch())},this.isRunning=!1,this.onStop=new d(!0),this.onStart=new d(!0),this.tick=new d(!0)};!function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-a}}}(),b.exports=e},{"./signal.js":52}],62:[function(a,b,c){var d=a("./timer"),e={Tick:function(){var a,b=this,c=new d,e=!1;c.start(),this.setTick=function(d){c.reset(),e=!0,a=setInterval(function(){e&&b.onTick(c.getElapsedTime())},d)},this.clearTick=function(){e=!1,clearInterval(a)}},Functions:{getIdentity:function(){return function(a){return a}},getHyperbola:function(a){a=isFinite(a)?a:7;var b;b=a>0?function(b){return-1/(b+1/a)+a}:0>a?function(b){return-1/(b-1+1/a)+a/(1-a)}:e.Functions.getIdentity();var c=b(1);return function(a){return b(a)/c}},getNormalizedExtern:function(a,b){var c={easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*(a*a*(((e*=1.525)+1)*a-e))+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeOutCubic:function(a,b,c,d){return a/=d,a--,c*(a*a*a+1)+b},easeOutQuart:function(a,b,c,d){return a/=d,a--,-c*(a*a*a*a-1)+b}};return function(d){return c[a](d,0,1,1,b)}}},Player:function(){var a,b,c,d,f=this,g=!1,h=new e.Tick,i=[],j=40,k=function(){h.clearTick(),g=!1,f.onStop()},l=function(a){if(0===i.length)k();else{var c=i.shift();o(a,b,c),b=c,0===c.timeSpan&&d(a)}},m=function(a){c=a,f.onFrame(a.values)},n=function(a,b,c){return a+c*(b-a)},o=function(b,c,e){var f=c.values,g=e.values;for(var h in f)f.hasOwnProperty(h)&&(g[h]=parseFloat(g[h]),isNaN(g[h])&&(g[h]=f[h]));d=function(c){var d,h={};if(c<b+e.timeSpan){var i=a((c-b)/e.timeSpan);for(d in f)f.hasOwnProperty(d)&&(h[d]=n(f[d],g[d],i));m({timeSpan:0,values:h})}else{for(d in g)g.hasOwnProperty(d)&&(h[d]=g[d]);m({timeSpan:0,values:h}),l(b+e.timeSpan)}}};this.initialize=function(c,d){if(b)for(var f in b.values)b.values.hasOwnProperty(f)&&(c[f]=b.values[f]);i=[],a=d||a||e.Functions.getHyperbola(),b={timeSpan:0,values:c}},this.addKey=function(a,b){i.push({timeSpan:a,values:b})},this.gotoKey=function(a,c,d){f.initialize(b.values,d),f.addKey(a,c),f.start()},this.start=function(){f.stop(),h.setTick(Math.ceil(1e3/j)),g=!0,l(0)},this.stop=function(){g&&(h.clearTick(),b=c||b,g=!1)},this.isPlaying=function(){return g},this.onFrame=function(a){},this.onStop=function(){},h.onTick=function(a){d(a)}}};b.exports=e},{"./timer":61}],63:[function(a,b,c){var d=a("./stored-user-data"),e=a("./lo"),f=function(a){var b=a.hadInitiatedVisible?"iv":"inv",c=new d({name:"vr"+a.name+b,separator:"",maxRecords:a.vRateMaxRecords,expirationDays:a.expirationDays}),f=new d({name:"vt"+a.name,separator:",",maxRecords:a.vTimeMaxRecords,expirationDays:a.expirationDays}),g=function(b){return b.length>0&&b.length>=a.vRateMinRecords?Math.round(e.reduce(b,function(a,b){return a+parseInt(b,10)})/b.length*100):null},h=function(b){return b.length>0&&b.length>=a.vTimeMinRecords?Math.round(e.reduce(b,function(a,b){return a+parseInt(b,10)})/b.length):null},i=g(c.getValues()),j=h(f.getValues());c.addRecord(),this.registerViewableImpression=function(){c.setCurrentValue(1),f.addRecord()},this.updateViewabilityTime=function(a){a>f.getCurrentValue()&&f.setCurrentValue(a)},this.getViewabilityRate=function(){return i},this.getViewabilityTime=function(){return j}};b.exports=f},{"./lo":36,"./stored-user-data":55}],64:[function(a,b,c){var d=a("./signal"),e=a("./lo"),f=a("lie"),g={};g.buildQuery=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(a[c]||0===a[c])&&(b+=c+"="+a[c]+"&");return b.substring(0,b.length-1)},g.loadJSFile=function(a,b){b=b||window;var c=b.document,d=c.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src",a);var e=c.body||c.head||c.getElementsByTagName("head")[0];e.insertBefore(d,e.firstChild)},g.arrayIsEmpty=function(a){return!(a&&a.length)},g.generateKey=function(a,b){for(var c="",d=b||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=0;a>e;e++)c+=d.charAt(Math.floor(Math.random()*d.length));return c},g.generateNumericKey=function(a){return g.generateKey(a,"0123456789")},g.isAccessible=function(a){try{if(a.location.href)return!0}catch(b){}return!1},g.getParent=function(a){return a=a||window,g.isWindow(a.parent)?a.parent:a},g.getTopAccessWindow=function(a){var b,c,d=0;for(b=c=a||window;b!=g.getParent(b)&&20>d;){try{b=g.getParent(b)}catch(e){return a||window}g.isAccessible(b)&&(c=b),d++}return c},g.getFrameElementFromWindow=function(a,b){for(var c=a.document.getElementsByTagName("iframe"),d=0;d<c.length;d++)if(c[d].contentWindow==b)return c[d];return null},g.getOuterAccessibleFrame=function(a){for(var b=a||window,c=g.getParent(b),d=null;c!=b;)g.isAccessible(c)&&(d=g.getFrameElementFromWindow(c,b)),b=c,c=g.getParent(b);return d},g.getNodeWindow=function(a){var b=a.ownerDocument;return b.parentWindow||b.defaultView},g.isWindow=function(a){try{return null!==a&&a===a.window}catch(b){return!0}},g.isDocument=function(a){return a&&9==a.nodeType},g.isElement=function(a){return!!a&&1===a.nodeType&&g.isObjectLike(a)&&!g.isPlainObject(a)},g.getInternetExplorerVersion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!==c.exec(b)&&(a=parseFloat(RegExp.$1))}return a},g.getViewportSize=function(a){a=a||window.document;var b,c;return"undefined"!=typeof a.documentElement&&"undefined"!=typeof a.documentElement.clientWidth&&0!=a.documentElement.clientWidth&&("CSS1Compat"==a.compatMode||g.getInternetExplorerVersion()>-1)?(b=a.documentElement.clientWidth,c=a.documentElement.clientHeight):(b=a.getElementsByTagName("body")[0].clientWidth,c=a.getElementsByTagName("body")[0].clientHeight),{width:b,height:c}},g.isPageVisible=function(){for(var a=g.getTopAccessWindow(),b=["hidden","mozHidden","msHidden","webkitHidden"],c=0;c<b.length;c++){var d=b[c];if("undefined"!=typeof document[d])return!document[d]}return a.document.hasFocus?a.document.hasFocus():!0},g.loadCSSFile=function(a,b,c){b=b||window,c=c||function(){};var d=b.document.createElement("link");if(d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href",a),!navigator.userAgent.toLowerCase().match(/^(?!.*chrome).*safari/)&&"onload"in d)d.onload=function(){c(!0)};else if("onreadystatechange"in d)d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&c(!0)};else var e={maxAttempts:200,delay:100},f=0,g=setInterval(function(){if(d.sheet)for(var a=b.document.styleSheets,h=0;h<a.length;h++){var i=a[h],j=i.ownerNode?i.ownerNode:i.owningElement;if(j===d)return c(!0),void clearInterval(g)}f++>e.maxAttempts&&(c(!1),clearInterval(g))},e.delay);b.document.getElementsByTagName("head")[0].appendChild(d)},g.extend=function(a,b,c){c=c||{array:"merge",overwrite:!0,deep:!1},a=a||{};for(var d in b)b.hasOwnProperty(d)&&(g.isPlainObject(b[d])&&g.isPlainObject(a[d])?g.extend(a[d],b[d]):e.isArray(b[d])&&e.isArray(a[d])?"concat"==c.array?a[d]=a[d].concat(b[d]):g.extend(a[d],b[d]):c.deep&&e.isArray(b[d])?a[d]=g.extend([],b[d]):c.deep&&g.isPlainObject(b[d])?a[d]=g.extend({},b[d]):(c.overwrite||!a.hasOwnProperty(d))&&(a[d]=b[d]));return a},g.type=function(a){var b={};return e.forEach("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a){b["[object "+a+"]"]=a.toLowerCase()}),null===a?a+"":"object"==typeof a||"function"==typeof a?b[b.toString.call(a)]||"object":typeof a},g.isPlainObject=function(a){if("object"!==g.type(a)||a.nodeType||g.isWindow(a))return!1;try{if(a.constructor&&!a.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(b){return!1}return!0},g.isObjectLike=function(a){return!!a&&"object"==typeof a},g.adjustIframeSize=function(a,b,c){if(g.isAccessible(a.parent)&&a.frameElement){var d=a.document.body.style;d.overflow="hidden",d.marginLeft=0,d.marginTop=0,7==g.getInternetExplorerVersion()&&(a.document.getElementsByTagName("html")[0].style.overflow="hidden");var e=a.frameElement;e.style.width=b+"px",e.style.height=c+"px",e.style.border=0,e.style.overflow="hidden",e.frameBorder=0,e.marginWidth=0,e.marginHeight=0,e.leftMargin=0,e.topMargin=0,e.border=0}},g.hasAccessibleFrameElement=function(a){return g.isAccessible(a.parent)&&a.frameElement},g.setIframeDisplay=function(a,b){if(g.hasAccessibleFrameElement(a)){var c=a.frameElement;c.style.display=b}},g.hideNodePersistently=function(a){a.style.display="block",a.style.visibility="hidden",a.style.opacity=0,a.style.position="absolute",a.style.top="-50000px",a.style.left="-50000px",a.style.zIndex="-50000",a.style.width=0,a.style.height=0},g.isSafari=function(){return/Constructor/.test(window.HTMLElement)},g.isFirefox=function(){return"InstallTrigger"in window},g.reloadFontCss=function(a){e.forEach(a.css,function(b,c){-1!=b.indexOf("fonts.google")&&g.loadCSSFile(b,a.placement.formatWindow,function(){g.log("Font css reloaded")})})},g.getDescendantProperty=function(a,b){for(var c=b.split("."),d=c.length-1;d>=0;d--)"this"==c[d]&&c.splice(d,1);for(;c.length&&(a=a[c.shift()]););return a},g.trim=function(a){return(a||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")},g.parseJSON=function(a){if("string"!=typeof a||!a)return null;a=g.trim(a);try{return window.JSON&&window.JSON.parse?window.JSON.parse(a):new Function("return "+a)()}catch(b){return null}},g.parseIfJson=function(a){return g.parseJSON(a)||a},g.parseQueryParams=function(a){var b={};if(a&&a.split){a.indexOf("?")>-1&&(a=a.slice(a.indexOf("?")+1));for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(2==e.length)try{b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}catch(f){}}}return b},g.toArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},g.inRect=function(a,b,c){return!(a<c.left||a>c.right||b<c.top||b>c.bottom)},g.getScroll=function(a){a=a||g.getTopAccessWindow().document;var b=a.documentElement,c=a.body,d=a.defaultView;return{scrollLeft:Math.max(b.scrollLeft,c.scrollLeft,d?d.pageXOffset:0),scrollTop:Math.max(b.scrollTop,c.scrollTop,d?d.pageYOffset:0)}},g.addEventListener=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!0):a["on"+b]=c},g.removeEventListener=function(a,b,c){a.dettachEvent?a.dettachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!0):a["on"+b]=null},g.objectIsEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},g.unescape=function(a){return unescape(a)},g.decodeHTMLEntities=function(a){a=g.unescape(a);var b=document.createElement("textarea");return b.innerHTML="&","&amp;"==b.innerHTML?(b.innerHTML=a,b.value):a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(b)})},g.isNear=function(a,b,c){return Math.abs(a-b)<=c},g.getWindow=function(a){return a.defaultView||a.parentWindow},g.call=function(a){return a()},g.whileDifferent=function(a,b){for(var c="";c!=a;)c=a,a=b(a);return a},g.toCamelCase=function(a){return a.replace(/(?:adm)?\-(\w+)/g,function(a,b,c){return c?b.charAt(0).toUpperCase()+b.slice(1):b})},g.msToSec=function(a){return parseInt(Math.round(a/1e3),10)},g.isMobile=function(){var a=navigator.userAgent||navigator.vendor||window.opera,b=/android|ipad|playbook|silk/i.test(a);return b||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))},g.isSmartphone=function(){var a=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))},g.isTablet=function(){var a=navigator.userAgent||navigator.vendor||window.opera,b=/ipad|playbook|silk/i.test(a)||/android/i.test(a)&&!/mobile/i.test(a);return b},g.iOSVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]}return null},g.log=function(a){window.console&&window.console.log&&console.log.apply(console,["AEP - "+(a.stack||a)].concat(Array.prototype.slice.call(arguments).slice(1)))},g.noCache=function(a){return a.replace(/\[(timestamp|random|rnd)]/gi,g.generateKey(8))},g.report=function(a,b){var c;e.isFunction(b)||(b=function(){}),e.isString(a)&&(a=[a]),e.forEach(a,function(a){a=g.noCache(a);var d=!1;c=new Image,c.onerror=c.onload=function(){d||(d=!0,b(a))},c.src=a,g.reportHistory.push(c)})},g.reportHistory=[],g.htmlToBase64DataUri=function(a){return"data:text/html;base64,"+window.btoa(a)},g.jsToHtmlBase64DataUri=function(a){return g.htmlToBase64DataUri('<!DOCTYPE html><html><body><script type="text/javascript">'+a+"</script></body></html>")},g.isJsToHtmlBase64DataUriSupported=function(){var a=!1;try{var b=document.createElement("iframe");b.src=g.jsToHtmlBase64DataUri('window.location.href = "about:blank"'),document.body.appendChild(b),a="about:blank"==b.contentWindow.location.href}catch(c){}return b.parentNode&&document.body.removeChild(b),a},g.poll=function(a,b){var c=new d(!!b),e=a();b&&c.subscribe(b),
e&&c.dispatch();var f=setInterval(function(){var d=a();!e&&d&&(c.dispatch(),b||clearInterval(f)),e=d},50);return c},g.createWatcher=function(a,b){var c,e={status:a(),leading:new d(!0),trailing:new d(!0),watch:function(){c=setInterval(function(){a()!=e.status&&(e.status=!e.status,e[e.status?"leading":"trailing"].dispatch())},b||50)},unwatch:function(){clearInterval(c)}};return e},g.wait=function(a,b,c){return new f(function(d,e){var f=setInterval(function(){var b=a();b&&(d(b),clearInterval(f))},b);g.callIfFunction(c,g,[function(){setTimeout(function(){clearInterval(f),e("Wait rejected")},b)}])})},g.domContentLoaded=function(a,b){"loading"!=a.document.readyState?b():g.addEventListener(a,"DOMContentLoaded",b)},g.cumulativeDelayed=function(a,b){var c,d=!1;return function(){return a()!=d&&(d=!d,c=performance.now()),d&&performance.now()-c>=b}},g.callIfFunction=function(a,b,c){a&&e.isFunction(a)&&a.apply(b,c||[])},g.addDaysToDate=function(a,b){return a.setDate(a.getDate()+b),a},g.addHoursToDate=function(a,b){var c=a.getHours()+b;return a.setDate(a.getDate()+Math.floor(c/24)),a.setHours(c%24),a},g.addMinutesToDate=function(a,b){return a.setTime(a.getTime()+6e4*b),a},g.getProtocol=function(a){return a=a||window,"about:"==a.location.protocol?a.parent.location.protocol:a.location.protocol},g.addProtocolIfNeeded=function(a,b){return/^[a-zA-Z]+:\/\//.test(a)?a:b+a},g.formatCurrency=function(a,b,c,d,e){var f;d?f=parseInt(d):a.replace(/[.|,](\d*)/,function(a,b){f=!b||b.match(/^0*$/)?0:b.length});var g=b||"R$ ",h=e||"",i=c||",",j=parseFloat(a.replace(",",".")).toFixed(f),k=parseInt(j)+"",l=(l=k.length)>3?l%3:0;return g+(l?k.substr(0,l)+h:"")+k.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?i+Math.abs(j-k).toFixed(f).slice(2):"")},g.formatPrice=function(a,b,c){var d="";if("undefined"!=typeof a&&null!==a){var e,f=g.decodeHTMLEntities(a),h=[];b?h=b.split("|"):c&&(h=[c]),e=f.match(/(?:R?$ ?)?(\d+[.,]\d*)/)||f.match(/(?:R?$ ?)?(\d+[.,]?\d*)/),d=e?f.replace(/R?\$/g,"").replace(e[1],function(){return h.unshift(e[1]),g.formatCurrency.apply(this,h)}):f}return d},g.isSecure=function(a){return a&&!!a.match(/^https:\/\//)},g.isAbsPath=function(a){return!!a.match(/^\w+:\/\//)},g.getHigherIframe=function(a){var b=g.getWindow(a.ownerDocument);return g.isAccessible(b.parent)&&b.frameElement&&(a=g.getHigherIframe(b.frameElement)),a},g.replaceTokens=function(a,b,c,d){return c=c||"[",d=d||"]",a?a.replace(new RegExp("\\"+c+"([^\\"+c+"\\"+d+"]+)\\"+d,"g"),function(a,c){return b[c]||a}):""},g.getFullDomain=function(a){var b=a.match(/(\w+?:\/\/[\w\W]+?)\//);return b?b[1]:null},g.secureImage=function(a,b,c){return a&&(c&&!a.match(/^(?:http:|https:)?\/\//)&&(a=c+a),"https:"==window.location.protocol&&a.match(/^http:\/\//)&&!a.match(/^https:\/\//)&&(a.match(/\/\/akfs\./)?a=a.replace("http:","https:").replace("//akfs","//s-akfs"):b&&(a=a.replace(/^(?:http:|https:)?\/\//,b)))),a},b.exports=g},{"./lo":36,"./signal":52,lie:8}],65:[function(a,b,c){var d=a("./utils"),e=a("./lo"),f=a("./service-data"),g=function(a,b,c,g){f.apply(this,arguments);var h=this,i=d.parseIfJson(a.prm)||{},j=b.videoCfg||{},k=function(a){var c=h.buildClickUrl(a);return c&&b.clickAudit&&(c=d.noCache(b.clickAudit)+encodeURIComponent(c)),c},l=function(a,c,f){var g=d.parseQueryParams(d.replaceTokens(a.clk,b,"%","%")),i=e.assign(c,{title:a.tit,eventURL:h.buildEventUrl(null,{c:g.c}),clickTag:k(g),videoSrc:-1!=c.res.indexOf("http")?c.res:a.dom+c.res});return e.assign(i,f||{})};this.file=j.file||a.file,this.params=l(a,i,j.params),this.isDeferredImpression=!!a.di,this.deferredImpressionHash=a.di?a.di.split("=")[1]:null,this.mediaType="video",this.config=b,this.vImpEventUrl=h.buildEventUrl("vimp"),this.vTimeEventUrl=h.buildEventUrl("vtime",{v:"[time]"})};b.exports=g},{"./lo":36,"./service-data":48,"./utils":64}],66:[function(a,b,c){var d=a("./utils.js"),e=a("lie"),f=a("./geometry"),g=function(a,b,c){var g,h=this,i=c||50,j={area:242500,percentage:50,corrected:30},k=function(){g=d.createWatcher(d.cumulativeDelayed(l,1e3),50),h.onHidden=g.trailing,h.onViewable=g.leading,h.onFirstView=new e(function(a,b){h.onViewable.subscribe(a)})},l=function(){var a=f.getElementRect(b);return d.isPageVisible()?i==j.percentage&&a.area>=j.area?f.intersectsViewport(b,j.corrected):f.intersectsViewport(b,i):!1};this.start=function(){d.getNodeWindow(b)!=top?d.log("Can not determine viewability"):(a.onClickProduct.subscribe(function(){h.onViewable.dispatch()}),g.watch())},this.stop=function(){g.unwatch()},k()};b.exports=g},{"./geometry":31,"./utils.js":64,lie:8}]},{},[37]);